<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no, user-scalable=no, viewport-fit=cover">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="theme-color" content="#1976d2">
    <title>ç§»åŠ¨ç«¯ä¼˜åŒ–æµ‹è¯• - VisNDT</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- ç§»åŠ¨ç«¯ä¼˜åŒ–æ ·å¼ -->
    <link href="/css/mobile-optimization.css" rel="stylesheet">
    <link href="/css/browser-compatibility.css" rel="stylesheet">
    
    <style>
        .test-section {
            background: white;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .browser-info {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 6px;
            margin: 1rem 0;
            font-size: 0.9rem;
        }
        .test-result {
            padding: 0.5rem;
            margin: 0.5rem 0;
            border-radius: 4px;
            font-size: 0.85rem;
        }
        .success { background: #d4edda; color: #155724; }
        .warning { background: #fff3cd; color: #856404; }
        .info { background: #d1ecf1; color: #0c5460; }
    </style>
</head>
<body>
    <div class="container-fluid">
        <header class="text-center py-3 bg-primary text-white">
            <h1 class="h4 mb-0">ğŸ“± ç§»åŠ¨ç«¯ä¼˜åŒ–æµ‹è¯•</h1>
            <small>å¤šæµè§ˆå™¨å…¼å®¹æ€§éªŒè¯</small>
        </header>

        <!-- æµè§ˆå™¨æ£€æµ‹ä¿¡æ¯ -->
        <div class="test-section">
            <h5><i class="fas fa-mobile-alt me-2"></i>è®¾å¤‡ä¸æµè§ˆå™¨ä¿¡æ¯</h5>
            <div class="browser-info" id="browserInfo">
                <div>æ­£åœ¨æ£€æµ‹è®¾å¤‡ä¿¡æ¯...</div>
            </div>
        </div>

        <!-- è§¦æ‘¸æµ‹è¯• -->
        <div class="test-section">
            <h5><i class="fas fa-hand-pointer me-2"></i>è§¦æ‘¸äº¤äº’æµ‹è¯•</h5>
            <div class="row g-2">
                <div class="col-6">
                    <button class="btn btn-primary w-100 test-touch-btn">
                        <i class="fas fa-click me-1"></i>è§¦æ‘¸æŒ‰é’®
                    </button>
                </div>
                <div class="col-6">
                    <button class="btn btn-outline-secondary w-100 test-touch-btn">
                        <i class="fas fa-touch me-1"></i>åé¦ˆæµ‹è¯•
                    </button>
                </div>
            </div>
            <div class="test-result info mt-2" id="touchResult">
                ç‚¹å‡»æŒ‰é’®æµ‹è¯•è§¦æ‘¸åé¦ˆæ•ˆæœ
            </div>
        </div>

        <!-- è¡¨å•æµ‹è¯• */
        <div class="test-section">
            <h5><i class="fas fa-edit me-2"></i>è¡¨å•è¾“å…¥æµ‹è¯•</h5>
            <form>
                <div class="mb-3">
                    <label class="form-label">æ–‡æœ¬è¾“å…¥</label>
                    <input type="text" class="form-control" placeholder="æµ‹è¯•æ–‡æœ¬è¾“å…¥">
                </div>
                <div class="mb-3">
                    <label class="form-label">é‚®ç®±è¾“å…¥</label>
                    <input type="email" class="form-control" placeholder="test@example.com">
                </div>
                <div class="mb-3">
                    <label class="form-label">ç”µè¯è¾“å…¥</label>
                    <input type="tel" class="form-control" placeholder="æ‰‹æœºå·ç ">
                </div>
                <div class="mb-3">
                    <label class="form-label">é€‰æ‹©æ¡†</label>
                    <select class="form-select">
                        <option>é€‰é¡¹1</option>
                        <option>é€‰é¡¹2</option>
                        <option>é€‰é¡¹3</option>
                    </select>
                </div>
            </form>
        </div>

        <!-- å¡ç‰‡å¸ƒå±€æµ‹è¯• -->
        <div class="test-section">
            <h5><i class="fas fa-th-large me-2"></i>å“åº”å¼å¸ƒå±€æµ‹è¯•</h5>
            <div class="row g-2">
                <div class="col-12 col-sm-6 col-lg-4">
                    <div class="card">
                        <div class="card-body">
                            <h6 class="card-title">äº§å“å¡ç‰‡1</h6>
                            <p class="card-text">è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•äº§å“å¡ç‰‡çš„æè¿°æ–‡æœ¬ã€‚</p>
                            <button class="btn btn-sm btn-primary">æŸ¥çœ‹è¯¦æƒ…</button>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-sm-6 col-lg-4">
                    <div class="card">
                        <div class="card-body">
                            <h6 class="card-title">äº§å“å¡ç‰‡2</h6>
                            <p class="card-text">è¿™æ˜¯å¦ä¸€ä¸ªæµ‹è¯•äº§å“å¡ç‰‡çš„æè¿°æ–‡æœ¬ã€‚</p>
                            <button class="btn btn-sm btn-outline-primary">æŸ¥çœ‹è¯¦æƒ…</button>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-sm-6 col-lg-4">
                    <div class="card">
                        <div class="card-body">
                            <h6 class="card-title">äº§å“å¡ç‰‡3</h6>
                            <p class="card-text">ç¬¬ä¸‰ä¸ªæµ‹è¯•äº§å“å¡ç‰‡çš„æè¿°æ–‡æœ¬å†…å®¹ã€‚</p>
                            <button class="btn btn-sm btn-success">æŸ¥çœ‹è¯¦æƒ…</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- åˆ†ç±»æŒ‰é’®æµ‹è¯• -->
        <div class="test-section">
            <h5><i class="fas fa-tags me-2"></i>åˆ†ç±»æŒ‰é’®æµ‹è¯•</h5>
            <div class="d-flex flex-wrap gap-1 gap-md-2 justify-content-center justify-content-md-start">
                <button class="btn btn-sm btn-primary primary-btn">
                    <i class="fas fa-home me-1"></i><span class="category-text">å…¨éƒ¨åˆ†ç±»</span>
                </button>
                <button class="btn btn-sm btn-outline-primary primary-btn">
                    <i class="fas fa-folder me-1"></i><span class="category-text">ç”µå­å†…çª¥é•œ</span>
                </button>
                <button class="btn btn-sm btn-outline-primary primary-btn">
                    <i class="fas fa-folder me-1"></i><span class="category-text">å…‰çº¤å†…çª¥é•œ</span>
                </button>
                <button class="btn btn-sm btn-outline-primary primary-btn">
                    <i class="fas fa-folder me-1"></i><span class="category-text">å…‰å­¦å†…çª¥é•œ</span>
                </button>
            </div>
        </div>

        <!-- æ»šåŠ¨æµ‹è¯• -->
        <div class="test-section">
            <h5><i class="fas fa-arrows-alt-v me-2"></i>æ»šåŠ¨æ€§èƒ½æµ‹è¯•</h5>
            <div class="scroll-container" style="height: 200px; overflow-y: auto; border: 1px solid #dee2e6; border-radius: 6px; padding: 1rem;">
                <p>è¿™æ˜¯ä¸€ä¸ªå¯æ»šåŠ¨çš„å®¹å™¨ï¼Œç”¨äºæµ‹è¯•ç§»åŠ¨ç«¯æ»šåŠ¨æ€§èƒ½ã€‚</p>
                <p>åœ¨iOS Safariä¸­ï¼Œåº”è¯¥æœ‰å¹³æ»‘çš„æ»šåŠ¨æ•ˆæœã€‚</p>
                <p>åœ¨Android Chromeä¸­ï¼Œæ»šåŠ¨åº”è¯¥æµç•…æ— å¡é¡¿ã€‚</p>
                <p>åœ¨UCæµè§ˆå™¨ä¸­ï¼Œæ»šåŠ¨æ¡åº”è¯¥æ­£å¸¸æ˜¾ç¤ºã€‚</p>
                <p>åœ¨360æ‰‹æœºæµè§ˆå™¨ä¸­ï¼Œæ»šåŠ¨åº”è¯¥å“åº”è¿…é€Ÿã€‚</p>
                <p>è¿™é‡Œæœ‰æ›´å¤šçš„å†…å®¹æ¥æµ‹è¯•æ»šåŠ¨æ•ˆæœ...</p>
                <p>ç»§ç»­æ»šåŠ¨æŸ¥çœ‹æ›´å¤šå†…å®¹...</p>
                <p>ç§»åŠ¨ç«¯æ»šåŠ¨ä¼˜åŒ–åŒ…æ‹¬ï¼š</p>
                <ul>
                    <li>-webkit-overflow-scrolling: touch</li>
                    <li>å¹³æ»‘æ»šåŠ¨åŠ¨ç”»</li>
                    <li>æ»šåŠ¨æ€§èƒ½ä¼˜åŒ–</li>
                    <li>é˜²æ­¢æ»šåŠ¨ç©¿é€</li>
                </ul>
                <p>æ»šåŠ¨åˆ°åº•éƒ¨äº†ï¼</p>
            </div>
        </div>

        <!-- æ¨¡æ€æ¡†æµ‹è¯• -->
        <div class="test-section">
            <h5><i class="fas fa-window-maximize me-2"></i>æ¨¡æ€æ¡†æµ‹è¯•</h5>
            <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#testModal">
                <i class="fas fa-external-link-alt me-1"></i>æ‰“å¼€æ¨¡æ€æ¡†
            </button>
        </div>

        <!-- æµ‹è¯•ç»“æœ -->
        <div class="test-section">
            <h5><i class="fas fa-check-circle me-2"></i>ä¼˜åŒ–æ•ˆæœæ£€æµ‹</h5>
            <div id="optimizationResults">
                <div class="test-result info">æ­£åœ¨æ£€æµ‹ä¼˜åŒ–æ•ˆæœ...</div>
            </div>
        </div>

        <!-- è¿”å›é¡¶éƒ¨æŒ‰é’® -->
        <button id="backToTopBtn" class="btn btn-primary position-fixed" style="bottom: 20px; right: 20px; z-index: 1000; display: none; border-radius: 50%; width: 50px; height: 50px;">
            <i class="fas fa-arrow-up"></i>
        </button>
    </div>

    <!-- æµ‹è¯•æ¨¡æ€æ¡† -->
    <div class="modal fade" id="testModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">ç§»åŠ¨ç«¯æ¨¡æ€æ¡†æµ‹è¯•</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <p>è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•æ¨¡æ€æ¡†ï¼Œç”¨äºéªŒè¯ç§»åŠ¨ç«¯æ¨¡æ€æ¡†çš„æ˜¾ç¤ºæ•ˆæœã€‚</p>
                    <p>åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šï¼Œæ¨¡æ€æ¡†åº”è¯¥ï¼š</p>
                    <ul>
                        <li>æ­£ç¡®é€‚åº”å±å¹•å°ºå¯¸</li>
                        <li>é˜²æ­¢èƒŒæ™¯æ»šåŠ¨</li>
                        <li>æ”¯æŒè§¦æ‘¸å…³é—­</li>
                        <li>ç„¦ç‚¹ç®¡ç†æ­£ç¡®</li>
                    </ul>
                    <div class="mb-3">
                        <label class="form-label">æµ‹è¯•è¾“å…¥æ¡†</label>
                        <input type="text" class="form-control" placeholder="åœ¨æ¨¡æ€æ¡†ä¸­è¾“å…¥æ–‡æœ¬">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">å…³é—­</button>
                    <button type="button" class="btn btn-primary">ç¡®å®š</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- ç§»åŠ¨ç«¯ä¼˜åŒ–è„šæœ¬ -->
    <script src="/js/mobile-optimization.js"></script>

    <script>
        // æµè§ˆå™¨æ£€æµ‹å’Œæ˜¾ç¤º
        function displayBrowserInfo() {
            const info = {
                userAgent: navigator.userAgent,
                platform: navigator.platform,
                language: navigator.language,
                screenWidth: screen.width,
                screenHeight: screen.height,
                windowWidth: window.innerWidth,
                windowHeight: window.innerHeight,
                devicePixelRatio: window.devicePixelRatio || 1,
                touchSupport: 'ontouchstart' in window,
                orientation: window.orientation || 0
            };

            const browserType = detectBrowser();
            
            document.getElementById('browserInfo').innerHTML = `
                <div><strong>æµè§ˆå™¨ç±»å‹:</strong> ${browserType}</div>
                <div><strong>å±å¹•å°ºå¯¸:</strong> ${info.screenWidth} Ã— ${info.screenHeight}</div>
                <div><strong>çª—å£å°ºå¯¸:</strong> ${info.windowWidth} Ã— ${info.windowHeight}</div>
                <div><strong>è®¾å¤‡åƒç´ æ¯”:</strong> ${info.devicePixelRatio}</div>
                <div><strong>è§¦æ‘¸æ”¯æŒ:</strong> ${info.touchSupport ? 'æ˜¯' : 'å¦'}</div>
                <div><strong>å±å¹•æ–¹å‘:</strong> ${Math.abs(info.orientation) === 90 ? 'æ¨ªå±' : 'ç«–å±'}</div>
                <div><strong>è¯­è¨€:</strong> ${info.language}</div>
                <div><strong>å¹³å°:</strong> ${info.platform}</div>
            `;
        }

        function detectBrowser() {
            const ua = navigator.userAgent;
            if (/UCBrowser|UCWEB/.test(ua)) return 'UCæµè§ˆå™¨';
            if (/360/.test(ua)) return '360æ‰‹æœºæµè§ˆå™¨';
            if (/QQBrowser/.test(ua)) return 'QQæµè§ˆå™¨';
            if (/SogouMobileBrowser/.test(ua)) return 'æœç‹—æ‰‹æœºæµè§ˆå™¨';
            if (/HuaweiBrowser/.test(ua)) return 'åä¸ºæµè§ˆå™¨';
            if (/MiuiBrowser/.test(ua)) return 'MIUIæµè§ˆå™¨';
            if (/Safari/.test(ua) && !/Chrome/.test(ua)) return 'Safari';
            if (/Chrome/.test(ua)) return 'Chrome Mobile';
            if (/Firefox/.test(ua)) return 'Firefox Mobile';
            return 'å…¶ä»–æµè§ˆå™¨';
        }

        // è§¦æ‘¸æµ‹è¯•
        function setupTouchTest() {
            const buttons = document.querySelectorAll('.test-touch-btn');
            const result = document.getElementById('touchResult');
            
            buttons.forEach(btn => {
                btn.addEventListener('touchstart', () => {
                    result.innerHTML = 'âœ… è§¦æ‘¸å¼€å§‹äº‹ä»¶è§¦å‘';
                    result.className = 'test-result success mt-2';
                });
                
                btn.addEventListener('touchend', () => {
                    result.innerHTML = 'âœ… è§¦æ‘¸ç»“æŸäº‹ä»¶è§¦å‘ - è§¦æ‘¸åé¦ˆæ­£å¸¸';
                    result.className = 'test-result success mt-2';
                });
                
                btn.addEventListener('click', () => {
                    result.innerHTML = 'âœ… ç‚¹å‡»äº‹ä»¶è§¦å‘ - äº¤äº’æ­£å¸¸';
                    result.className = 'test-result success mt-2';
                });
            });
        }

        // ä¼˜åŒ–æ•ˆæœæ£€æµ‹
        function checkOptimizations() {
            const results = [];
            
            // æ£€æµ‹CSSæ”¯æŒ
            if (CSS.supports('-webkit-overflow-scrolling', 'touch')) {
                results.push('âœ… iOSæ»šåŠ¨ä¼˜åŒ–æ”¯æŒ');
            } else {
                results.push('âš ï¸ iOSæ»šåŠ¨ä¼˜åŒ–ä¸æ”¯æŒ');
            }
            
            // æ£€æµ‹è§¦æ‘¸æ”¯æŒ
            if ('ontouchstart' in window) {
                results.push('âœ… è§¦æ‘¸äº‹ä»¶æ”¯æŒ');
            } else {
                results.push('âš ï¸ è§¦æ‘¸äº‹ä»¶ä¸æ”¯æŒ');
            }
            
            // æ£€æµ‹è§†å£è®¾ç½®
            const viewport = document.querySelector('meta[name="viewport"]');
            if (viewport && viewport.content.includes('user-scalable=no')) {
                results.push('âœ… é˜²ç¼©æ”¾è®¾ç½®æ­£ç¡®');
            } else {
                results.push('âš ï¸ é˜²ç¼©æ”¾è®¾ç½®ç¼ºå¤±');
            }
            
            // æ£€æµ‹å“åº”å¼å¸ƒå±€
            if (window.innerWidth <= 768) {
                results.push('âœ… ç§»åŠ¨ç«¯å¸ƒå±€æ¿€æ´»');
            } else {
                results.push('â„¹ï¸ æ¡Œé¢ç«¯å¸ƒå±€');
            }
            
            document.getElementById('optimizationResults').innerHTML = 
                results.map(result => `<div class="test-result ${result.includes('âœ…') ? 'success' : result.includes('âš ï¸') ? 'warning' : 'info'}">${result}</div>`).join('');
        }

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            displayBrowserInfo();
            setupTouchTest();
            checkOptimizations();
            
            // å±å¹•æ—‹è½¬æ£€æµ‹
            window.addEventListener('orientationchange', function() {
                setTimeout(() => {
                    displayBrowserInfo();
                    checkOptimizations();
                }, 100);
            });
        });
    </script>
</body>
</html>
