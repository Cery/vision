<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åˆ†ç±»æ•°æ®æµ‹è¯•</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-4">
        <h2>åˆ†ç±»æ•°æ®æµ‹è¯•</h2>
        
        <div class="row">
            <div class="col-md-6">
                <h4>ä¸»è¦åˆ†ç±»æµ‹è¯•</h4>
                <div class="mb-3">
                    <label class="form-label">ä¸»è¦åˆ†ç±»</label>
                    <select class="form-select" id="primaryCategory" onchange="updateSecondary()">
                        <option value="">é€‰æ‹©ä¸»è¦åˆ†ç±»</option>
                    </select>
                </div>
                
                <div class="mb-3">
                    <label class="form-label">æ¬¡è¦åˆ†ç±»</label>
                    <select class="form-select" id="secondaryCategory">
                        <option value="">é€‰æ‹©æ¬¡è¦åˆ†ç±»</option>
                    </select>
                </div>
                
                <div class="d-grid gap-2">
                    <button class="btn btn-primary" onclick="loadCategories()">åŠ è½½åˆ†ç±»æ•°æ®</button>
                    <button class="btn btn-info" onclick="testCategories()">æµ‹è¯•åˆ†ç±»æ•°æ®</button>
                    <button class="btn btn-success" onclick="showCategoryData()">æ˜¾ç¤ºåˆ†ç±»ç»“æ„</button>
                </div>
            </div>
            
            <div class="col-md-6">
                <h4>åˆ†ç±»æ•°æ®æ˜¾ç¤º</h4>
                <div id="categoryDisplay" class="border p-3 bg-light" style="height: 400px; overflow-y: auto;">
                    <p>ç‚¹å‡»æŒ‰é’®åŠ è½½åˆ†ç±»æ•°æ®...</p>
                </div>
            </div>
        </div>
        
        <div class="row mt-4">
            <div class="col-12">
                <h4>æµ‹è¯•æ—¥å¿—</h4>
                <div id="logArea" class="border p-3 bg-light" style="height: 200px; overflow-y: auto;">
                    <p>ç­‰å¾…æ“ä½œ...</p>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // åˆ†ç±»å±‚çº§æ•°æ®ï¼ˆä¸ä¸»é¡µé¢ç›¸åŒ - ä¿®æ­£ç‰ˆæœ¬ï¼‰
        const categoryHierarchyData = [
            {
                id: "electronic-endoscope",
                title: "ç”µå­å†…çª¥é•œ",
                icon: "fas fa-video",
                subcategories: [
                    { title: "å·¥ä¸šè§†é¢‘å†…çª¥é•œ", icon: "fas fa-camera" },
                    { title: "å·¥ä¸šç®¡é“å†…çª¥é•œ", icon: "fas fa-pipe-section" },
                    { title: "çˆ¬è¡Œæœºå™¨äºº", icon: "fas fa-robot" }
                ]
            },
            {
                id: "fiber-endoscope",
                title: "å…‰çº¤å†…çª¥é•œ",
                icon: "fas fa-fiber-optic",
                subcategories: [
                    { title: "æŸ”æ€§å…‰çº¤å†…çª¥é•œ", icon: "fas fa-wave-square" },
                    { title: "ç¡¬æ€§å…‰çº¤å†…çª¥é•œ", icon: "fas fa-minus" }
                ]
            },
            {
                id: "optical-endoscope",
                title: "å…‰å­¦å†…çª¥é•œ",
                icon: "fas fa-eye",
                subcategories: [
                    { title: "ç¡¬æ€§å…‰å­¦å†…çª¥é•œ", icon: "fas fa-binoculars" },
                    { title: "æŸ”æ€§å…‰å­¦å†…çª¥é•œ", icon: "fas fa-eye-dropper" }
                ]
            }
        ];

        let categoryHierarchy = {};

        function log(message) {
            const logArea = document.getElementById('logArea');
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = document.createElement('p');
            logEntry.className = 'mb-1';
            logEntry.textContent = `[${timestamp}] ${message}`;
            logArea.appendChild(logEntry);
            logArea.scrollTop = logArea.scrollHeight;
            console.log(message);
        }

        function loadCategories() {
            log('ğŸ”„ å¼€å§‹åŠ è½½åˆ†ç±»æ•°æ®...');
            
            // æ„å»ºåˆ†ç±»å±‚çº§å¯¹è±¡
            categoryHierarchy = {};
            categoryHierarchyData.forEach(primary => {
                categoryHierarchy[primary.title] = primary.subcategories.map(sub => sub.title);
            });
            
            log(`âœ… åˆ†ç±»å±‚çº§å¯¹è±¡æ„å»ºå®Œæˆ: ${Object.keys(categoryHierarchy).length} ä¸ªä¸»åˆ†ç±»`);
            
            // å¡«å……ä¸»è¦åˆ†ç±»ä¸‹æ‹‰æ¡†
            const primarySelect = document.getElementById('primaryCategory');
            primarySelect.innerHTML = '<option value="">é€‰æ‹©ä¸»è¦åˆ†ç±»</option>';
            
            const primaryCategories = categoryHierarchyData.map(category => category.title);
            log(`ğŸ“‹ ä¸»è¦åˆ†ç±»åˆ—è¡¨: ${primaryCategories.join(', ')}`);
            
            primaryCategories.forEach(category => {
                const option = document.createElement('option');
                option.value = category;
                option.textContent = category;
                primarySelect.appendChild(option);
            });
            
            log(`âœ… ä¸»è¦åˆ†ç±»ä¸‹æ‹‰æ¡†å·²å¡«å……: ${primarySelect.options.length - 1} ä¸ªé€‰é¡¹`);
        }

        function updateSecondary() {
            const primaryCategory = document.getElementById('primaryCategory').value;
            const secondarySelect = document.getElementById('secondaryCategory');
            
            log(`ğŸ”„ æ›´æ–°æ¬¡è¦åˆ†ç±»ï¼Œé€‰æ‹©çš„ä¸»åˆ†ç±»: ${primaryCategory}`);
            
            secondarySelect.innerHTML = '<option value="">é€‰æ‹©æ¬¡è¦åˆ†ç±»</option>';
            
            if (primaryCategory && categoryHierarchy[primaryCategory]) {
                const subcategories = categoryHierarchy[primaryCategory];
                log(`ğŸ“‹ ${primaryCategory} çš„å­åˆ†ç±»: ${subcategories.join(', ')}`);
                
                subcategories.forEach(subCategory => {
                    const option = document.createElement('option');
                    option.value = subCategory;
                    option.textContent = subCategory;
                    secondarySelect.appendChild(option);
                });
                
                log(`âœ… æ¬¡è¦åˆ†ç±»ä¸‹æ‹‰æ¡†å·²æ›´æ–°: ${secondarySelect.options.length - 1} ä¸ªé€‰é¡¹`);
            } else {
                log('âš ï¸ æ²¡æœ‰æ‰¾åˆ°å¯¹åº”çš„å­åˆ†ç±»');
            }
        }

        function testCategories() {
            log('ğŸ§ª å¼€å§‹æµ‹è¯•åˆ†ç±»æ•°æ®...');
            
            const primarySelect = document.getElementById('primaryCategory');
            const secondarySelect = document.getElementById('secondaryCategory');
            
            log(`ğŸ“Š ä¸»è¦åˆ†ç±»ä¸‹æ‹‰æ¡†é€‰é¡¹æ•°é‡: ${primarySelect.options.length}`);
            log(`ğŸ“Š æ¬¡è¦åˆ†ç±»ä¸‹æ‹‰æ¡†é€‰é¡¹æ•°é‡: ${secondarySelect.options.length}`);
            
            // æ˜¾ç¤ºæ‰€æœ‰ä¸»è¦åˆ†ç±»é€‰é¡¹
            for (let i = 0; i < primarySelect.options.length; i++) {
                const option = primarySelect.options[i];
                log(`ğŸ“‹ ä¸»è¦åˆ†ç±»é€‰é¡¹ ${i}: "${option.value}" - "${option.text}"`);
            }
            
            log('âœ… åˆ†ç±»æ•°æ®æµ‹è¯•å®Œæˆ');
        }

        function showCategoryData() {
            const display = document.getElementById('categoryDisplay');
            let html = '<h5>å®Œæ•´åˆ†ç±»ç»“æ„</h5>';
            
            categoryHierarchyData.forEach((primary, index) => {
                html += `
                    <div class="mb-3">
                        <h6><i class="${primary.icon}"></i> ${primary.title}</h6>
                        <ul class="list-group list-group-flush">
                `;
                
                primary.subcategories.forEach(sub => {
                    html += `
                        <li class="list-group-item py-1">
                            <i class="${sub.icon}"></i> ${sub.title}
                        </li>
                    `;
                });
                
                html += '</ul></div>';
            });
            
            display.innerHTML = html;
            log('âœ… åˆ†ç±»ç»“æ„å·²æ˜¾ç¤º');
        }

        // é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨åŠ è½½åˆ†ç±»
        document.addEventListener('DOMContentLoaded', function() {
            log('âœ… é¡µé¢åŠ è½½å®Œæˆ');
            setTimeout(() => {
                loadCategories();
                showCategoryData();
            }, 500);
        });
    </script>
</body>
</html>
