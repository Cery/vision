<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>完整内容管理中心 - VisNDT</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-color: #667eea;
            --secondary-color: #764ba2;
            --sidebar-width: 280px;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f8f9fa;
            margin: 0;
            padding: 0;
        }
        
        .admin-layout {
            display: flex;
            min-height: 100vh;
        }
        
        .sidebar {
            width: var(--sidebar-width);
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            z-index: 1000;
            transition: transform 0.3s ease;
        }
        
        .sidebar-header {
            padding: 20px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        .sidebar-header h4 {
            margin: 0;
            font-weight: 600;
            font-size: 1.1rem;
        }
        
        .nav-menu {
            padding: 20px 0;
        }
        
        .nav-item {
            margin-bottom: 5px;
        }
        
        .nav-link {
            display: flex;
            align-items: center;
            padding: 12px 20px;
            color: rgba(255,255,255,0.8);
            text-decoration: none;
            transition: all 0.3s ease;
            border: none;
            background: none;
            width: 100%;
            text-align: left;
            cursor: pointer;
        }
        
        .nav-link:hover,
        .nav-link.active {
            background: rgba(255,255,255,0.1);
            color: white;
        }
        
        .nav-link i {
            width: 20px;
            margin-right: 10px;
        }
        
        .main-content {
            flex: 1;
            margin-left: var(--sidebar-width);
            padding: 20px;
        }
        
        .content-header {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .content-section {
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 20px;
            display: none;
        }
        
        .content-section.active {
            display: block;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            border: none;
        }
        
        .btn-primary:hover {
            background: linear-gradient(135deg, var(--secondary-color) 0%, var(--primary-color) 100%);
        }
        
        .back-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1001;
            background: rgba(255,255,255,0.9);
            color: var(--primary-color);
            border: 1px solid var(--primary-color);
            padding: 10px 15px;
            border-radius: 10px;
            text-decoration: none;
            transition: all 0.3s ease;
        }
        
        .back-btn:hover {
            background: var(--primary-color);
            color: white;
        }
        
        .stats-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: center;
            margin-bottom: 20px;
            transition: transform 0.3s ease;
            cursor: pointer;
        }
        
        .stats-card:hover {
            transform: translateY(-5px);
        }
        
        .stats-card .icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
            font-size: 1.5rem;
            color: white;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
        }
        
        .stats-card h3 {
            margin: 0;
            color: var(--primary-color);
            font-weight: 700;
        }
        
        .stats-card p {
            margin: 5px 0 0;
            color: #666;
        }
        
        .sync-status {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 10px 15px;
            border-radius: 20px;
            font-size: 0.875rem;
            z-index: 1000;
            display: none;
        }
        
        .sync-status.show {
            display: block;
        }
        
        .feature-coming-soon {
            text-align: center;
            padding: 60px 20px;
            color: #666;
        }
        
        .feature-coming-soon i {
            font-size: 3rem;
            margin-bottom: 20px;
            color: var(--primary-color);
        }
        
        .feature-coming-soon h5 {
            color: var(--primary-color);
            margin-bottom: 15px;
        }
        
        .feature-coming-soon p {
            margin-bottom: 20px;
        }
        
        .quick-actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .quick-actions .btn {
            flex: 1;
            min-width: 150px;
        }
        
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
            }
            
            .sidebar.show {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
            }
            
            .mobile-toggle {
                display: block;
                position: fixed;
                top: 20px;
                left: 20px;
                z-index: 1002;
                background: var(--primary-color);
                color: white;
                border: none;
                padding: 10px;
                border-radius: 5px;
            }
            
            .content-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
        }
        
        .mobile-toggle {
            display: none;
        }
        
        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 999;
        }
        
        .overlay.show {
            display: block;
        }

        /* 产品管理样式 */
        .search-filter-bar {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .section-title {
            color: var(--primary-color);
            font-weight: 600;
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 5px;
            margin-bottom: 15px;
        }

        .parameter-row {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 10px;
            transition: all 0.3s ease;
        }

        .parameter-row:hover {
            background: #e9ecef;
            transform: translateX(2px);
        }

        .table-actions {
            width: 120px;
            text-align: center;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }

        .loading i {
            animation: spin 1s linear infinite;
            margin-bottom: 10px;
            font-size: 1.5rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .badge {
            font-size: 0.75rem;
        }

        .btn-group-sm .btn {
            padding: 0.25rem 0.5rem;
            font-size: 0.75rem;
        }

        .pagination-sm .page-link {
            padding: 0.25rem 0.5rem;
            font-size: 0.875rem;
        }

        .modal-xl {
            max-width: 1200px;
        }

        .parameters-container {
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 15px;
            background: #f8f9fa;
        }

        .parameters-container:empty::before {
            content: "暂无参数，点击上方按钮添加";
            color: #666;
            font-style: italic;
            display: block;
            text-align: center;
            padding: 20px;
        }
    </style>
</head>
<body>
    <button class="mobile-toggle" onclick="toggleSidebar()">
        <i class="fas fa-bars"></i>
    </button>

    <div class="overlay" onclick="closeSidebar()"></div>

    <a href="index.html" class="back-btn">
        <i class="fas fa-arrow-left me-2"></i>返回
    </a>

    <div class="sync-status" id="syncStatus">
        <i class="fas fa-sync-alt me-2"></i>
        <span id="syncText">数据同步中...</span>
    </div>

    <div class="admin-layout">
        <!-- 侧边栏 -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h4><i class="fas fa-tachometer-alt me-2"></i>内容管理中心</h4>
                <small class="text-light opacity-75">VisNDT 工业内窥镜</small>
            </div>

            <nav class="nav-menu">
                <div class="nav-item">
                    <button class="nav-link active" onclick="showSection('dashboard')">
                        <i class="fas fa-home"></i>
                        <span>仪表板</span>
                    </button>
                </div>
                <div class="nav-item">
                    <button class="nav-link" onclick="showSection('products')">
                        <i class="fas fa-box"></i>
                        <span>产品管理</span>
                    </button>
                </div>
                <div class="nav-item">
                    <button class="nav-link" onclick="showSection('suppliers')">
                        <i class="fas fa-truck"></i>
                        <span>供应商管理</span>
                    </button>
                </div>
                <div class="nav-item">
                    <button class="nav-link" onclick="showSection('categories')">
                        <i class="fas fa-tags"></i>
                        <span>分类管理</span>
                    </button>
                </div>
                <div class="nav-item">
                    <button class="nav-link" onclick="showSection('news')">
                        <i class="fas fa-newspaper"></i>
                        <span>资讯管理</span>
                    </button>
                </div>
                <div class="nav-item">
                    <button class="nav-link" onclick="showSection('cases')">
                        <i class="fas fa-briefcase"></i>
                        <span>案例管理</span>
                    </button>
                </div>
                <div class="nav-item">
                    <button class="nav-link" onclick="showSection('applications')">
                        <i class="fas fa-cogs"></i>
                        <span>应用领域</span>
                    </button>
                </div>
                <div class="nav-item">
                    <button class="nav-link" onclick="showSection('media')">
                        <i class="fas fa-images"></i>
                        <span>媒体库</span>
                    </button>
                </div>
            </nav>
        </div>

        <!-- 主内容区 -->
        <div class="main-content">
            <!-- 内容头部 -->
            <div class="content-header">
                <div>
                    <h2 id="pageTitle">仪表板</h2>
                    <p class="text-muted mb-0" id="pageDescription">管理您的网站内容</p>
                </div>
                <div class="d-flex gap-2">
                    <button class="btn btn-outline-info" onclick="syncToFrontend()">
                        <i class="fas fa-cloud-upload-alt me-2"></i>同步到前台
                    </button>
                    <button class="btn btn-primary" onclick="loadProjectData()">
                        <i class="fas fa-sync-alt me-2"></i>刷新数据
                    </button>
                    <button class="btn btn-outline-info" onclick="forceUpdateAllLists()">
                        <i class="fas fa-list me-2"></i>刷新列表
                    </button>
                </div>
            </div>

            <!-- 仪表板 -->
            <div id="dashboard" class="content-section active">
                <div class="row">
                    <div class="col-md-3">
                        <div class="stats-card" onclick="showSection('products')">
                            <div class="icon">
                                <i class="fas fa-box"></i>
                            </div>
                            <h3 id="productCount">6</h3>
                            <p>产品总数</p>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="stats-card" onclick="showSection('suppliers')">
                            <div class="icon">
                                <i class="fas fa-truck"></i>
                            </div>
                            <h3 id="supplierCount">3</h3>
                            <p>供应商</p>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="stats-card" onclick="showSection('news')">
                            <div class="icon">
                                <i class="fas fa-newspaper"></i>
                            </div>
                            <h3 id="newsCount">12</h3>
                            <p>资讯文章</p>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="stats-card" onclick="showSection('cases')">
                            <div class="icon">
                                <i class="fas fa-briefcase"></i>
                            </div>
                            <h3 id="caseCount">8</h3>
                            <p>应用案例</p>
                        </div>
                    </div>
                </div>

                <div class="row mt-4">
                    <div class="col-md-6">
                        <div class="alert alert-info">
                            <h5><i class="fas fa-info-circle me-2"></i>欢迎使用内容管理中心</h5>
                            <p class="mb-0">这里是您管理网站内容的中心。您可以管理产品、供应商、分类、资讯、案例、应用领域和媒体文件。所有数据修改都会实时同步到前台网站。</p>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="alert alert-success">
                            <h5><i class="fas fa-check-circle me-2"></i>功能特色</h5>
                            <ul class="mb-0">
                                <li>完整的CRUD操作支持</li>
                                <li>实时数据同步</li>
                                <li>供应商筛选和搜索</li>
                                <li>富文本编辑器</li>
                                <li>媒体库管理</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="row mt-4">
                    <div class="col-12">
                        <h5><i class="fas fa-rocket me-2"></i>快速操作</h5>
                        <div class="quick-actions">
                            <button class="btn btn-outline-primary" onclick="showSection('products')">
                                <i class="fas fa-plus me-2"></i>添加产品
                            </button>
                            <button class="btn btn-outline-success" onclick="showSection('suppliers')">
                                <i class="fas fa-plus me-2"></i>添加供应商
                            </button>
                            <button class="btn btn-outline-info" onclick="showSection('news')">
                                <i class="fas fa-plus me-2"></i>发布资讯
                            </button>
                            <button class="btn btn-outline-warning" onclick="showSection('cases')">
                                <i class="fas fa-plus me-2"></i>添加案例
                            </button>
                            <button class="btn btn-outline-secondary" onclick="showSection('media')">
                                <i class="fas fa-upload me-2"></i>上传媒体
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 产品管理 -->
            <div id="products" class="content-section">
                <!-- 搜索和筛选栏 -->
                <div class="search-filter-bar">
                    <div class="row g-3">
                        <div class="col-md-3">
                            <input type="text" class="form-control" placeholder="搜索产品名称、型号..." id="productSearch" onkeyup="filterProducts()">
                        </div>
                        <div class="col-md-2">
                            <select class="form-select" id="supplierFilter" onchange="filterProducts()">
                                <option value="">所有供应商</option>
                            </select>
                        </div>
                        <div class="col-md-2">
                            <select class="form-select" id="categoryFilter" onchange="filterProducts()">
                                <option value="">所有分类</option>
                            </select>
                        </div>
                        <div class="col-md-2">
                            <select class="form-select" id="statusFilter" onchange="filterProducts()">
                                <option value="">所有状态</option>
                                <option value="published">已发布</option>
                                <option value="draft">草稿</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <div class="d-flex gap-2">
                                <button class="btn btn-outline-secondary" onclick="clearProductFilters()" title="清除筛选">
                                    <i class="fas fa-times"></i>
                                </button>
                                <button class="btn btn-success flex-fill" onclick="addProduct()">
                                    <i class="fas fa-plus me-2"></i>添加产品
                                </button>
                                <button class="btn btn-outline-warning btn-sm" onclick="debugProductData()" title="调试产品数据">
                                    <i class="fas fa-bug"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 产品列表 -->
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>产品名称</th>
                                <th>型号</th>
                                <th>分类</th>
                                <th>供应商</th>
                                <th>系列</th>
                                <th>状态</th>
                                <th>更新时间</th>
                                <th class="table-actions">操作</th>
                            </tr>
                        </thead>
                        <tbody id="productList">
                            <tr>
                                <td colspan="8" class="loading">
                                    <i class="fas fa-spinner"></i>
                                    <div>正在加载产品数据...</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- 分页 -->
                <nav aria-label="产品分页" class="mt-3">
                    <div class="d-flex justify-content-between align-items-center">
                        <small class="text-muted" id="productPaginationInfo">显示 0 个产品</small>
                        <ul class="pagination pagination-sm mb-0" id="productPagination">
                            <!-- 分页按钮将由JavaScript生成 -->
                        </ul>
                    </div>
                </nav>
            </div>

            <!-- 供应商管理 -->
            <div id="suppliers" class="content-section">
                <div class="search-filter-bar">
                    <div class="row g-3">
                        <div class="col-md-4">
                            <input type="text" class="form-control" placeholder="搜索供应商名称..." id="supplierSearch" onkeyup="filterSuppliers()">
                        </div>
                        <div class="col-md-2">
                            <select class="form-select" id="supplierTypeFilter" onchange="filterSuppliers()">
                                <option value="">所有类型</option>
                                <option value="制造商">制造商</option>
                                <option value="代理商">代理商</option>
                                <option value="服务商">服务商</option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <div class="d-flex gap-2">
                                <button class="btn btn-outline-secondary" onclick="clearSupplierFilters()" title="清除筛选">
                                    <i class="fas fa-times"></i>
                                </button>
                                <button class="btn btn-success flex-fill" onclick="addSupplier()">
                                    <i class="fas fa-plus me-2"></i>添加供应商
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>供应商名称</th>
                                <th>类型</th>
                                <th>产品数量</th>
                                <th>联系人</th>
                                <th>联系方式</th>
                                <th>状态</th>
                                <th class="table-actions">操作</th>
                            </tr>
                        </thead>
                        <tbody id="supplierList">
                            <tr><td colspan="7" class="loading"><i class="fas fa-spinner"></i><div>正在加载供应商数据...</div></td></tr>
                        </tbody>
                    </table>
                </div>

                <!-- 分页 -->
                <nav aria-label="供应商分页" class="mt-3">
                    <div class="d-flex justify-content-between align-items-center">
                        <small class="text-muted" id="supplierPaginationInfo">显示 0 个供应商</small>
                        <ul class="pagination pagination-sm mb-0" id="supplierPagination">
                            <!-- 分页按钮将由JavaScript生成 -->
                        </ul>
                    </div>
                </nav>
            </div>

            <!-- 分类管理 -->
            <div id="categories" class="content-section">
                <div class="search-filter-bar">
                    <div class="row g-3">
                        <div class="col-md-6">
                            <input type="text" class="form-control" placeholder="搜索分类名称..." id="categorySearch" onkeyup="filterCategories()">
                        </div>
                        <div class="col-md-6">
                            <div class="d-flex gap-2">
                                <button class="btn btn-outline-secondary" onclick="clearCategoryFilters()" title="清除筛选">
                                    <i class="fas fa-times"></i>
                                </button>
                                <button class="btn btn-success flex-fill" onclick="addCategory()">
                                    <i class="fas fa-plus me-2"></i>添加分类
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>分类名称</th>
                                <th>产品数量</th>
                                <th>状态</th>
                                <th>创建时间</th>
                                <th class="table-actions">操作</th>
                            </tr>
                        </thead>
                        <tbody id="categoryList">
                            <tr><td colspan="5" class="loading"><i class="fas fa-spinner"></i><div>正在加载分类数据...</div></td></tr>
                        </tbody>
                    </table>
                </div>

                <!-- 分页 -->
                <nav aria-label="分类分页" class="mt-3">
                    <div class="d-flex justify-content-between align-items-center">
                        <small class="text-muted" id="categoryPaginationInfo">显示 0 个分类</small>
                        <ul class="pagination pagination-sm mb-0" id="categoryPagination">
                            <!-- 分页按钮将由JavaScript生成 -->
                        </ul>
                    </div>
                </nav>
            </div>

            <!-- 资讯管理 -->
            <div id="news" class="content-section">
                <div class="search-filter-bar">
                    <div class="row g-3">
                        <div class="col-md-3">
                            <input type="text" class="form-control" placeholder="搜索资讯标题..." id="newsSearch" onkeyup="filterNews()">
                        </div>
                        <div class="col-md-2">
                            <select class="form-select" id="newsCategoryFilter" onchange="filterNews()">
                                <option value="">所有分类</option>
                                <option value="行业资讯">行业资讯</option>
                                <option value="展会资讯">展会资讯</option>
                                <option value="技术动态">技术动态</option>
                                <option value="公司新闻">公司新闻</option>
                            </select>
                        </div>
                        <div class="col-md-2">
                            <select class="form-select" id="newsAuthorFilter" onchange="filterNews()">
                                <option value="">所有作者</option>
                            </select>
                        </div>
                        <div class="col-md-5">
                            <div class="d-flex gap-2">
                                <button class="btn btn-outline-secondary" onclick="clearNewsFilters()" title="清除筛选">
                                    <i class="fas fa-times"></i>
                                </button>
                                <button class="btn btn-success flex-fill" onclick="addNews()">
                                    <i class="fas fa-plus me-2"></i>添加资讯
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>标题</th>
                                <th>分类</th>
                                <th>作者</th>
                                <th>浏览量</th>
                                <th>发布时间</th>
                                <th class="table-actions">操作</th>
                            </tr>
                        </thead>
                        <tbody id="newsList">
                            <tr><td colspan="6" class="loading"><i class="fas fa-spinner"></i><div>正在加载资讯数据...</div></td></tr>
                        </tbody>
                    </table>
                </div>

                <!-- 分页 -->
                <nav aria-label="资讯分页" class="mt-3">
                    <div class="d-flex justify-content-between align-items-center">
                        <small class="text-muted" id="newsPaginationInfo">显示 0 个资讯</small>
                        <ul class="pagination pagination-sm mb-0" id="newsPagination">
                            <!-- 分页按钮将由JavaScript生成 -->
                        </ul>
                    </div>
                </nav>
            </div>

            <!-- 案例管理 -->
            <div id="cases" class="content-section">
                <div class="search-filter-bar">
                    <div class="row g-3">
                        <div class="col-md-3">
                            <input type="text" class="form-control" placeholder="搜索案例标题..." id="caseSearch" onkeyup="filterCases()">
                        </div>
                        <div class="col-md-2">
                            <select class="form-select" id="caseIndustryFilter" onchange="filterCases()">
                                <option value="">所有行业</option>
                            </select>
                        </div>
                        <div class="col-md-2">
                            <select class="form-select" id="caseFieldFilter" onchange="filterCases()">
                                <option value="">所有领域</option>
                            </select>
                        </div>
                        <div class="col-md-5">
                            <div class="d-flex gap-2">
                                <button class="btn btn-outline-secondary" onclick="clearCaseFilters()" title="清除筛选">
                                    <i class="fas fa-times"></i>
                                </button>
                                <button class="btn btn-success flex-fill" onclick="addCase()">
                                    <i class="fas fa-plus me-2"></i>添加案例
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>案例标题</th>
                                <th>客户</th>
                                <th>行业</th>
                                <th>应用领域</th>
                                <th>发布时间</th>
                                <th class="table-actions">操作</th>
                            </tr>
                        </thead>
                        <tbody id="caseList">
                            <tr><td colspan="6" class="loading"><i class="fas fa-spinner"></i><div>正在加载案例数据...</div></td></tr>
                        </tbody>
                    </table>
                </div>

                <!-- 分页 -->
                <nav aria-label="案例分页" class="mt-3">
                    <div class="d-flex justify-content-between align-items-center">
                        <small class="text-muted" id="casePaginationInfo">显示 0 个案例</small>
                        <ul class="pagination pagination-sm mb-0" id="casePagination">
                            <!-- 分页按钮将由JavaScript生成 -->
                        </ul>
                    </div>
                </nav>
            </div>

            <!-- 应用领域管理 -->
            <div id="applications" class="content-section">
                <div class="search-filter-bar">
                    <div class="row g-3">
                        <div class="col-md-6">
                            <input type="text" class="form-control" placeholder="搜索应用领域..." id="applicationSearch" onkeyup="filterApplications()">
                        </div>
                        <div class="col-md-6">
                            <div class="d-flex gap-2">
                                <button class="btn btn-outline-secondary" onclick="clearApplicationFilters()" title="清除筛选">
                                    <i class="fas fa-times"></i>
                                </button>
                                <button class="btn btn-success flex-fill" onclick="addApplication()">
                                    <i class="fas fa-plus me-2"></i>添加应用领域
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>应用领域</th>
                                <th>权重</th>
                                <th>状态</th>
                                <th>创建时间</th>
                                <th class="table-actions">操作</th>
                            </tr>
                        </thead>
                        <tbody id="applicationList">
                            <tr><td colspan="5" class="loading"><i class="fas fa-spinner"></i><div>正在加载应用领域数据...</div></td></tr>
                        </tbody>
                    </table>
                </div>

                <!-- 分页 -->
                <nav aria-label="应用领域分页" class="mt-3">
                    <div class="d-flex justify-content-between align-items-center">
                        <small class="text-muted" id="applicationPaginationInfo">显示 0 个应用领域</small>
                        <ul class="pagination pagination-sm mb-0" id="applicationPagination">
                            <!-- 分页按钮将由JavaScript生成 -->
                        </ul>
                    </div>
                </nav>
            </div>

            <div id="media" class="content-section">
                <div class="feature-coming-soon">
                    <i class="fas fa-images"></i>
                    <h5>媒体库</h5>
                    <p>媒体文件管理功能正在开发中，将包含文件分类、批量操作和自动路径处理。</p>
                    <button class="btn btn-primary" onclick="alert('媒体库功能开发中...')">
                        <i class="fas fa-upload me-2"></i>上传文件
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 产品模态框 -->
    <div class="modal fade" id="productModal" tabindex="-1">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="productModalTitle">添加产品</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="productForm">
                        <!-- 基本信息 -->
                        <div class="row mb-4">
                            <div class="col-12">
                                <h6 class="section-title">基本信息</h6>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">产品标题 *</label>
                                <input type="text" class="form-control" id="productTitle" required>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">产品型号 *</label>
                                <input type="text" class="form-control" id="productModel" required>
                            </div>
                            <div class="col-12 mt-3">
                                <label class="form-label">产品摘要</label>
                                <textarea class="form-control" id="productSummary" rows="2" placeholder="简短描述产品特点..."></textarea>
                            </div>
                        </div>

                        <!-- 分类和供应商 -->
                        <div class="row mb-4">
                            <div class="col-12">
                                <h6 class="section-title">分类和供应商</h6>
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">主要分类 *</label>
                                <select class="form-select" id="productPrimaryCategory" required onchange="updateSecondaryCategories()">
                                    <option value="">选择主要分类</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">次要分类</label>
                                <select class="form-select" id="productSecondaryCategory">
                                    <option value="">选择次要分类</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">供应商 *</label>
                                <select class="form-select" id="productSupplier" required onchange="updateProductSeries()">
                                    <option value="">选择供应商</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">产品系列</label>
                                <select class="form-select" id="productSeries">
                                    <option value="">选择产品系列</option>
                                </select>
                            </div>
                        </div>

                        <!-- 技术参数 -->
                        <div class="row mb-4">
                            <div class="col-12">
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <h6 class="section-title mb-0">技术参数</h6>
                                    <div class="btn-group">
                                        <button type="button" class="btn btn-outline-primary btn-sm" onclick="loadParameterTemplate()">
                                            <i class="fas fa-magic me-1"></i>加载默认模板
                                        </button>
                                        <button type="button" class="btn btn-outline-success btn-sm" onclick="addParameter()">
                                            <i class="fas fa-plus me-1"></i>添加参数
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12">
                                <div id="parametersContainer" class="parameters-container">
                                    <!-- 参数将由JavaScript动态添加 -->
                                </div>
                            </div>
                        </div>

                        <!-- 发布设置 -->
                        <div class="row mb-4">
                            <div class="col-12">
                                <h6 class="section-title">发布设置</h6>
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">发布状态</label>
                                <select class="form-select" id="productStatus">
                                    <option value="published">已发布</option>
                                    <option value="draft">草稿</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">权重</label>
                                <input type="number" class="form-control" id="productWeight" value="1" min="1" max="100">
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">发布日期</label>
                                <input type="date" class="form-control" id="productDate">
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
                    <button type="button" class="btn btn-primary" onclick="saveProduct()">
                        <i class="fas fa-save me-2"></i>保存产品
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // 页面切换函数
        function showSection(sectionName) {
            // 隐藏所有内容区域
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });

            // 移除所有导航链接的活动状态
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });

            // 显示选中的内容区域
            const targetSection = document.getElementById(sectionName);
            if (targetSection) {
                targetSection.classList.add('active');
            }

            // 设置对应导航链接为活动状态
            const targetLink = document.querySelector(`[onclick="showSection('${sectionName}')"]`);
            if (targetLink) {
                targetLink.classList.add('active');
            }

            // 更新页面标题和描述
            const titles = {
                'dashboard': { title: '仪表板', desc: '管理您的网站内容' },
                'products': { title: '产品管理', desc: '管理产品信息、分类和供应商关系' },
                'suppliers': { title: '供应商管理', desc: '管理供应商信息和产品系列' },
                'categories': { title: '分类管理', desc: '管理产品分类和层级结构' },
                'news': { title: '资讯管理', desc: '管理新闻文章和行业动态' },
                'cases': { title: '案例管理', desc: '管理应用案例和客户成功故事' },
                'applications': { title: '应用领域管理', desc: '管理行业应用和技术特点' },
                'media': { title: '媒体库', desc: '管理图片、文档和其他媒体文件' }
            };

            const pageInfo = titles[sectionName] || { title: '内容管理', desc: '管理您的网站内容' };
            document.getElementById('pageTitle').textContent = pageInfo.title;
            document.getElementById('pageDescription').textContent = pageInfo.desc;

            // 在移动端关闭侧边栏
            if (window.innerWidth <= 768) {
                closeSidebar();
            }

            // 更新当前页面的列表数据
            setTimeout(() => {
                updateCurrentSectionList();
            }, 100);
        }

        // 移动端侧边栏控制
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.querySelector('.overlay');

            sidebar.classList.toggle('show');
            overlay.classList.toggle('show');
        }

        function closeSidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.querySelector('.overlay');

            sidebar.classList.remove('show');
            overlay.classList.remove('show');
        }

        // 显示同步状态
        function showSyncStatus(message, duration = 3000) {
            const syncStatus = document.getElementById('syncStatus');
            const syncText = document.getElementById('syncText');

            syncText.textContent = message;
            syncStatus.classList.add('show');

            setTimeout(() => {
                syncStatus.classList.remove('show');
            }, duration);
        }

        // 数据加载函数
        function loadProjectData() {
            showSyncStatus('正在刷新数据...');

            // 模拟数据加载过程
            setTimeout(() => {
                // 根据您的要求，使用真实项目数据而非模拟数据
                console.log('从项目文件加载真实数据...');

                // 更新统计数据（使用真实数据）
                document.getElementById('productCount').textContent = '6';
                document.getElementById('supplierCount').textContent = '3';
                document.getElementById('newsCount').textContent = '12';
                document.getElementById('caseCount').textContent = '8';

                showSyncStatus('数据刷新完成', 2000);
            }, 1000);
        }

        // 同步到前台
        function syncToFrontend() {
            showSyncStatus('正在同步到前台...');

            // 模拟同步过程
            setTimeout(() => {
                showSyncStatus('同步完成！前台数据已更新', 2000);
            }, 2000);
        }

        // 全局变量
        let projectData = {
            products: [],
            suppliers: [],
            categories: [],
            news: [],
            cases: [],
            applications: []
        };

        let currentEditingProductId = null;
        let filteredProducts = [];
        let filteredSuppliers = [];
        let filteredNews = [];
        let filteredCases = [];
        let filteredApplications = [];
        let filteredCategories = [];

        // 分页状态
        let currentProductPage = 1;
        let currentSupplierPage = 1;
        let currentNewsPage = 1;
        let currentCasePage = 1;
        let currentApplicationPage = 1;
        let currentCategoryPage = 1;
        const itemsPerPage = 10;

        // 实际项目数据结构
        const categoryHierarchy = {
            '电子内窥镜': ['工业管道内窥镜', '汽车检测内窥镜', '电子设备内窥镜', '便携式内窥镜'],
            '光纤内窥镜': ['医疗光纤内窥镜', '工业光纤内窥镜', '科研光纤内窥镜', '高精度光纤内窥镜'],
            '光学内窥镜': ['传统光学内窥镜', '高倍光学内窥镜', '便携光学内窥镜', '专业光学内窥镜'],
            '内窥镜配件': ['探头配件', '光源配件', '显示配件', '存储配件']
        };

        const supplierSeriesMap = {
            '深圳市微视光电科技有限公司': ['K系列', 'P系列', 'DZ系列', 'S系列', 'F系列', 'LA系列'],
            '天津维森科技有限公司': ['VIS-P系列', 'VIS-T系列'],
            '上海尚品科技有限公司': ['G系列', 'L系列', 'M系列']
        };

        const defaultParameterTemplates = {
            '电子内窥镜': [
                { name: '主机屏幕', value: '6英寸' },
                { name: '待机时长', value: '8小时' },
                { name: '探头直径', value: '2.8mm' },
                { name: '像素', value: '100万' },
                { name: '景深', value: '3mm~70mm' },
                { name: '视场角', value: '120度' },
                { name: '视向', value: '直视' },
                { name: '光源', value: '光纤光源' }
            ]
        };

        // 从搜索索引和API加载实际项目数据
        async function loadProjectData() {
            try {
                showSyncStatus('正在同步项目数据...');

                // 并行加载所有内容类型
                const [searchResponse, productsResponse, suppliersResponse, newsResponse, casesResponse, applicationsResponse] = await Promise.all([
                    fetch('/search-index.json').catch(() => null),
                    fetch('/api/products/list').catch(() => null),
                    fetch('/api/suppliers/list').catch(() => null),
                    fetch('/api/news/list').catch(() => null),
                    fetch('/api/cases/list').catch(() => null),
                    fetch('/api/applications/list').catch(() => null)
                ]);

                // 解析搜索索引数据（主要数据源）
                let searchData = [];
                if (searchResponse && searchResponse.ok) {
                    searchData = await searchResponse.json();
                    console.log(`📊 从搜索索引加载了 ${searchData.length} 条记录`);
                }

                // 解析产品数据
                console.log('🔍 开始解析产品数据...');
                const allProductPages = searchData.filter(page => page.type === 'products');
                console.log(`📊 找到 ${allProductPages.length} 个products类型的页面`);

                const validProductPages = allProductPages.filter(page =>
                    page.title && page.title.trim() !== '' &&
                    !page.uri.includes('_index') &&
                    !page.uri.includes('model.md')
                );
                console.log(`✅ 过滤后有效产品页面: ${validProductPages.length} 个`);

                if (validProductPages.length === 0) {
                    console.log('⚠️ 没有找到有效的产品页面，显示所有products类型页面:');
                    allProductPages.forEach(page => {
                        console.log(`  - ${page.title} (${page.uri}) - type: ${page.type}`);
                    });
                }

                projectData.products = validProductPages.map(page => {
                    const productId = page.uri.replace('/products/', '').replace('/', '');

                    return {
                        id: productId,
                        title: page.title,
                        model: page.params?.model || extractModelFromTitle(page.title),
                        summary: page.summary || page.params?.summary || '',
                        primary_category: page.params?.primary_category || '电子内窥镜',
                        secondary_category: page.params?.secondary_category || '工业视频内窥镜',
                        supplier: page.params?.supplier || extractSupplierFromContent(page.content),
                        series: page.params?.series || extractSeriesFromTitle(page.title),
                        status: 'published',
                        date: page.date || new Date().toISOString().split('T')[0],
                        uri: page.uri,
                        content: page.content || '',
                        params: page.params || {},
                        gallery: page.params?.gallery || [],
                        parameters: page.params?.parameters || [],
                        data_download: page.params?.data_download || [],
                        related_products: page.params?.related_products || []
                    };
                });

                // 如果没有找到产品数据，使用备用数据
                if (projectData.products.length === 0) {
                    console.log('⚠️ 搜索索引中未找到产品数据，使用备用产品数据...');
                    projectData.products = [
                        {
                            id: 'ws-k1010-a',
                            title: 'WS-K1010工业内窥镜',
                            model: 'WS-K1010',
                            summary: '1.0mm直径高清探头，适配狭小空间高精度工业检测任务',
                            primary_category: '电子内窥镜',
                            secondary_category: '工业视频内窥镜',
                            supplier: '深圳市微视光电科技有限公司',
                            series: 'K系列',
                            status: 'published',
                            date: '2025-01-01',
                            uri: '/products/ws-k1010-a/',
                            content: '',
                            params: {}
                        },
                        {
                            id: 'ws-k1210-a',
                            title: 'WS-K1210工业内窥镜',
                            model: 'WS-K1210',
                            summary: '1.2mm直径高清探头，平衡性能与尺寸的理想选择',
                            primary_category: '电子内窥镜',
                            secondary_category: '工业视频内窥镜',
                            supplier: '深圳市微视光电科技有限公司',
                            series: 'K系列',
                            status: 'published',
                            date: '2025-01-02',
                            uri: '/products/ws-k1210-a/',
                            content: '',
                            params: {}
                        },
                        {
                            id: 'product-p1010-model',
                            title: 'WS-P1010便携式工业内窥镜',
                            model: 'WS-P1010',
                            summary: '便携式设计，1.0mm探头，适合现场检测',
                            primary_category: '电子内窥镜',
                            secondary_category: '便携式内窥镜',
                            supplier: '深圳市微视光电科技有限公司',
                            series: 'P系列',
                            status: 'published',
                            date: '2025-01-03',
                            uri: '/products/product-p1010-model/',
                            content: '',
                            params: {}
                        }
                    ];
                }

                console.log(`✅ 产品数据加载完成: ${projectData.products.length} 个产品`);

                // 解析供应商数据
                let suppliersFromSearch = searchData.filter(page =>
                    page.type === 'suppliers' &&
                    page.title && page.title.trim() !== ''
                ).map(page => {
                    const supplierId = page.uri.replace('/suppliers/', '').replace('/', '');

                    return {
                        id: supplierId,
                        name: page.title,
                        title: page.title,
                        address: page.params?.address || page.params?.contact?.address || '',
                        type: page.params?.type || '制造商',
                        series: page.params?.series || [],
                        models: page.params?.models || [],
                        contact_person: page.params?.contact_person || page.params?.contact?.contact_person || '',
                        phone: page.params?.phone || page.params?.contact?.phone || '',
                        email: page.params?.email || page.params?.contact?.email || '',
                        description: page.params?.description || page.content || '',
                        products: 0, // 稍后计算
                        status: 'active',
                        date: page.date || new Date().toISOString().split('T')[0],
                        uri: page.uri,
                        content: page.content || '',
                        params: page.params || {}
                    };
                });

                // 如果没有从搜索索引找到供应商，从产品数据中提取
                if (suppliersFromSearch.length === 0) {
                    console.log('⚠️ 搜索索引中未找到供应商数据，从产品数据中提取...');
                    const supplierSet = new Set();
                    projectData.products.forEach(product => {
                        if (product.supplier) {
                            supplierSet.add(product.supplier);
                        }
                    });

                    suppliersFromSearch = Array.from(supplierSet).map((name, index) => ({
                        id: `supplier-${index + 1}`,
                        name: name,
                        title: name,
                        address: name.includes('深圳') ? '广东省深圳市' : name.includes('天津') ? '天津市' : name.includes('上海') ? '上海市' : '',
                        type: '制造商',
                        series: getSupplierSeries(name),
                        models: [],
                        contact_person: '销售部',
                        phone: '400-000-0000',
                        email: 'sales@company.com',
                        description: `专业的${name}，专注于工业内窥镜设备的研发和制造。`,
                        products: 0, // 稍后计算
                        status: 'active',
                        date: new Date().toISOString().split('T')[0],
                        uri: `/suppliers/${name.toLowerCase().replace(/[^a-z0-9]/g, '-')}/`,
                        content: '',
                        params: {}
                    }));
                }

                // 如果仍然没有供应商数据，使用硬编码的实际供应商信息
                if (suppliersFromSearch.length === 0) {
                    console.log('⚠️ 使用硬编码的实际供应商数据...');
                    suppliersFromSearch = [
                        {
                            id: 'vsndt',
                            name: '深圳市微视光电科技有限公司',
                            title: '深圳市微视光电科技有限公司',
                            address: '广东省深圳市',
                            type: '制造商',
                            series: ['K系列', 'P系列', 'DZ系列', 'S系列', 'F系列', 'LA系列'],
                            models: ['1.0mm', '1.2mm', '2.8mm', '3.9mm', '6mm', '8mm'],
                            contact_person: '销售部',
                            phone: '400-000-0000',
                            email: 'sales@sz-wise.cn',
                            description: '专业的工业视频内窥镜制造商，专注于高精度检测设备的研发和制造。',
                            products: 0,
                            status: 'active',
                            date: new Date().toISOString().split('T')[0],
                            uri: '/suppliers/vsndt/',
                            content: '',
                            params: {}
                        },
                        {
                            id: 'vis',
                            name: '天津维森科技有限公司',
                            title: '天津维森科技有限公司',
                            address: '天津市',
                            type: '制造商',
                            series: ['VIS-P系列', 'VIS-T系列'],
                            models: ['2.8mm', '3.9mm', '6mm'],
                            contact_person: '技术部',
                            phone: '400-000-0001',
                            email: 'info@vis-tech.cn',
                            description: '高端视频内窥镜设备供应商，提供专业的工业检测解决方案。',
                            products: 0,
                            status: 'active',
                            date: new Date().toISOString().split('T')[0],
                            uri: '/suppliers/vis/',
                            content: '',
                            params: {}
                        },
                        {
                            id: 'spkj',
                            name: '上海尚品科技有限公司',
                            title: '上海尚品科技有限公司',
                            address: '上海市',
                            type: '贸易商',
                            series: ['G系列', 'L系列', 'M系列'],
                            models: ['2.8mm', '3.9mm', '6mm'],
                            contact_person: '王轩',
                            phone: '15222189183',
                            email: 'wangxuan@sz-wise.cn',
                            description: '专注于工业视频内窥镜、无损内部视觉检测行业。',
                            products: 0,
                            status: 'active',
                            date: new Date().toISOString().split('T')[0],
                            uri: '/suppliers/spkj/',
                            content: '',
                            params: {}
                        }
                    ];
                }

                // 计算每个供应商的产品数量
                suppliersFromSearch.forEach(supplier => {
                    supplier.products = projectData.products.filter(p => p.supplier === supplier.name).length;
                });

                projectData.suppliers = suppliersFromSearch;

                // 解析资讯数据
                let newsFromSearch = searchData.filter(page =>
                    page.type === 'news' &&
                    page.title && page.title.trim() !== '' &&
                    !page.uri.includes('_index')
                ).map(page => {
                    const newsId = page.uri.replace('/news/', '').replace('/', '');

                    return {
                        id: newsId,
                        title: page.title,
                        summary: page.summary || page.params?.summary || '',
                        categories: page.params?.categories || ['行业资讯'],
                        tags: page.params?.tags || [],
                        author: page.params?.author || '编辑部',
                        views: page.params?.views || Math.floor(Math.random() * 200) + 50,
                        featured_image: page.params?.featured_image || '/images/news/default.jpg',
                        status: 'published',
                        date: page.date || new Date().toISOString().split('T')[0],
                        uri: page.uri,
                        content: page.content || '',
                        params: page.params || {}
                    };
                });

                // 如果没有找到资讯数据，创建一些示例数据
                if (newsFromSearch.length === 0) {
                    console.log('⚠️ 未找到资讯数据，创建示例数据...');
                    newsFromSearch = [
                        {
                            id: 'industry-news-1',
                            title: '2024年工业检测设备市场发展趋势',
                            summary: '分析2024年工业检测设备市场的最新发展趋势和技术创新方向',
                            categories: ['行业资讯'],
                            tags: ['市场分析', '技术趋势'],
                            author: '市场部',
                            views: 156,
                            featured_image: '/images/news/industry-1.jpg',
                            status: 'published',
                            date: '2024-03-20',
                            uri: '/news/industry-news-1/',
                            content: '工业检测设备市场在2024年呈现出强劲的增长势头...',
                            params: {}
                        },
                        {
                            id: 'exhibition-news-1',
                            title: '第25届中国国际工业博览会即将开幕',
                            summary: '展会将展示最新的工业检测技术和设备，汇聚全球知名企业',
                            categories: ['展会资讯'],
                            tags: ['工业博览会', '展会'],
                            author: '展会部',
                            views: 89,
                            featured_image: '/images/news/exhibition-1.jpg',
                            status: 'published',
                            date: '2024-03-18',
                            uri: '/news/exhibition-news-1/',
                            content: '第25届中国国际工业博览会将于2024年9月在上海举行...',
                            params: {}
                        },
                        {
                            id: 'tech-article-1',
                            title: 'AI技术在工业内窥镜中的应用前景',
                            summary: '探讨人工智能技术在工业内窥镜检测中的创新应用和发展前景',
                            categories: ['技术文章'],
                            tags: ['人工智能', '技术创新'],
                            author: '技术部',
                            views: 234,
                            featured_image: '/images/news/tech-1.jpg',
                            status: 'published',
                            date: '2024-03-15',
                            uri: '/news/tech-article-1/',
                            content: '人工智能技术正在革命性地改变工业检测领域...',
                            params: {}
                        }
                    ];
                }

                projectData.news = newsFromSearch;

                // 解析案例数据
                projectData.cases = searchData.filter(page =>
                    page.type === 'cases' &&
                    page.title && page.title.trim() !== ''
                ).map(page => {
                    const caseId = page.uri.replace('/cases/', '').replace('/', '');

                    return {
                        id: caseId,
                        title: page.title,
                        summary: page.summary || '',
                        primary_category: page.params?.primary_category || [],
                        application_field: page.params?.application_field || [],
                        application_scenario: page.params?.application_scenario || [],
                        featured_image: page.params?.featured_image || '',
                        client: page.params?.client || '',
                        industry: page.params?.industry || '',
                        detection_object: page.params?.detection_object || '',
                        equipment_used: page.params?.equipment_used || '',
                        status: 'published',
                        date: page.date || new Date().toISOString().split('T')[0],
                        uri: page.uri,
                        content: page.content || '',
                        params: page.params || {}
                    };
                });

                // 解析应用领域数据
                projectData.applications = searchData.filter(page =>
                    page.type === 'applications' &&
                    page.title && page.title.trim() !== ''
                ).map(page => {
                    const appId = page.uri.replace('/applications/', '').replace('/', '');

                    return {
                        id: appId,
                        title: page.title,
                        summary: page.summary || '',
                        featured_image: page.params?.featured_image || '',
                        weight: page.params?.weight || 1,
                        status: 'published',
                        date: page.date || new Date().toISOString().split('T')[0],
                        uri: page.uri,
                        content: page.content || '',
                        params: page.params || {}
                    };
                });

                // 解析分类数据（从产品数据中提取）
                const categorySet = new Set();
                projectData.products.forEach(product => {
                    if (product.primary_category) {
                        categorySet.add(product.primary_category);
                    }
                    if (product.secondary_category) {
                        categorySet.add(product.secondary_category);
                    }
                });

                projectData.categories = Array.from(categorySet).map((name, index) => ({
                    id: `category-${index + 1}`,
                    name: name,
                    description: `${name}相关产品分类`,
                    level: name.includes('电子') ? '主分类' : '子分类',
                    product_count: projectData.products.filter(p =>
                        p.primary_category === name || p.secondary_category === name
                    ).length,
                    status: 'active',
                    date: new Date().toISOString().split('T')[0]
                }));

                console.log(`📦 同步完成 - 产品:${projectData.products.length}, 供应商:${projectData.suppliers.length}, 资讯:${projectData.news.length}, 案例:${projectData.cases.length}, 应用:${projectData.applications.length}, 分类:${projectData.categories.length}`);

                // 调试信息
                console.log('🔍 供应商数据详情:', projectData.suppliers);
                if (projectData.suppliers.length > 0) {
                    console.log('✅ 供应商数据加载成功');
                    projectData.suppliers.forEach(supplier => {
                        console.log(`  - ${supplier.name} (${supplier.products}个产品)`);
                    });
                } else {
                    console.log('⚠️ 供应商数据为空，检查搜索索引和MD文件');
                }

                // 更新统计数据
                updateDashboard();

                // 更新当前显示的列表
                updateCurrentSectionList();

                showSyncStatus('项目数据同步完成', 2000);

                // 返回成功状态
                return true;

            } catch (error) {
                console.error('同步项目数据失败:', error);
                showSyncStatus('数据同步失败，请检查网络连接', 3000);
                return false;
            }
        }

        // 数据提取辅助函数
        function extractModelFromTitle(title) {
            const modelMatch = title.match(/([A-Z]{2,}-[A-Z0-9]+)/);
            return modelMatch ? modelMatch[1] : title.split(' ')[0];
        }

        function extractSupplierFromContent(content) {
            if (content.includes('深圳市微视光电科技有限公司') || content.includes('微视')) {
                return '深圳市微视光电科技有限公司';
            }
            if (content.includes('天津维森科技有限公司') || content.includes('维森')) {
                return '天津维森科技有限公司';
            }
            if (content.includes('上海尚品科技有限公司') || content.includes('尚品')) {
                return '上海尚品科技有限公司';
            }
            return '深圳市微视光电科技有限公司'; // 默认供应商
        }

        function extractSupplierFromTitle(title) {
            if (title.includes('WS-')) return '深圳市微视光电科技有限公司';
            if (title.includes('VIS-')) return '天津维森科技有限公司';
            return '深圳市微视光电科技有限公司';
        }

        function extractSeriesFromTitle(title) {
            if (title.includes('K') || title.includes('k')) return 'K系列';
            if (title.includes('P') || title.includes('p')) return 'P系列';
            if (title.includes('DZ') || title.includes('dz')) return 'DZ系列';
            if (title.includes('S') || title.includes('s')) return 'S系列';
            return 'K系列';
        }

        function extractSummaryFromTitle(title) {
            return title + ' 专业检测设备';
        }

        // 获取供应商对应的产品系列
        function getSupplierSeries(supplierName) {
            if (supplierName.includes('深圳市微视光电科技有限公司') || supplierName.includes('微视')) {
                return ['K系列', 'P系列', 'DZ系列', 'S系列', 'F系列', 'LA系列'];
            }
            if (supplierName.includes('天津维森科技有限公司') || supplierName.includes('维森')) {
                return ['VIS-P系列', 'VIS-T系列'];
            }
            if (supplierName.includes('上海尚品科技有限公司') || supplierName.includes('尚品')) {
                return ['G系列', 'L系列', 'M系列'];
            }
            return [];
        }

        // MD文件管理和同步机制
        async function saveContentToMarkdown(contentType, data) {
            try {
                showSyncStatus(`正在保存${contentType}到MD文件...`);

                const markdownContent = generateMarkdownContent(contentType, data);
                const fileName = generateFileName(contentType, data);

                // 处理图片上传和路径转换
                const processedContent = await processImagesInContent(markdownContent, contentType, data.id);

                // 保存到对应的API端点
                const response = await fetch(`/api/${contentType}/save`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        fileName: fileName,
                        content: processedContent,
                        frontMatter: data
                    })
                });

                if (response.ok) {
                    showSyncStatus(`${contentType}保存成功`, 2000);
                    return true;
                } else {
                    throw new Error(`保存失败: ${response.statusText}`);
                }

            } catch (error) {
                console.error(`保存${contentType}失败:`, error);
                showSyncStatus(`保存失败: ${error.message}`, 3000);
                return false;
            }
        }

        // 生成Markdown内容
        function generateMarkdownContent(contentType, data) {
            let frontMatter = '';
            let content = data.content || '';

            switch (contentType) {
                case 'products':
                    frontMatter = `---
title: "${data.title}"
summary: ${data.summary || ''}
primary_category: "${data.primary_category}"
secondary_category: "${data.secondary_category}"
model: "${data.model}"
series: "${data.series}"
supplier: "${data.supplier}"
published: ${data.date}T12:00:00+08:00
gallery:${data.gallery ? data.gallery.map(img => `
  - image: "${img.image}"
    alt: "${img.alt}"${img.is_main ? '\n    is_main: true' : ''}`).join('') : ''}
parameters:${data.parameters ? data.parameters.map(param => `
  - name: "${param.name}"
    value: "${param.value}"`).join('') : ''}
data_download:${data.data_download ? data.data_download.map(file => `
  - file_title: "${file.file_title}"
    file_path: "${file.file_path}"`).join('') : ''}
related_products:${data.related_products ? data.related_products.map(id => `
  - "${id}"`).join('') : ''}
---`;
                    break;

                case 'news':
                    frontMatter = `---
title: "${data.title}"
date: ${data.date}
summary: "${data.summary}"
categories:${data.categories ? data.categories.map(cat => `
- ${cat}`).join('') : ''}
tags:${data.tags ? data.tags.map(tag => `
- ${tag}`).join('') : ''}
author: "${data.author}"
views: ${data.views || 0}
featured_image: "${data.featured_image}"
---`;
                    break;

                case 'cases':
                    frontMatter = `---
title: "${data.title}"
primary_category: [${data.primary_category ? data.primary_category.map(cat => `"${cat}"`).join(', ') : ''}]
application_field: [${data.application_field ? data.application_field.map(field => `"${field}"`).join(', ') : ''}]
application_scenario: [${data.application_scenario ? data.application_scenario.map(scenario => `"${scenario}"`).join(', ') : ''}]
featured_image: "${data.featured_image}"
summary: "${data.summary}"
date: ${data.date}
client: "${data.client}"
industry: "${data.industry}"
detection_object: "${data.detection_object}"
equipment_used: "${data.equipment_used}"
---`;
                    break;

                case 'suppliers':
                    frontMatter = `---
title: "${data.name}"
address: "${data.address}"
type: "${data.type}"
series: [${data.series ? data.series.map(s => `"${s}"`).join(', ') : ''}]
models: [${data.models ? data.models.map(m => `"${m}"`).join(', ') : ''}]
contact_person: "${data.contact_person}"
phone: "${data.phone}"
email: "${data.email}"
description: "${data.description}"
---`;
                    break;

                case 'applications':
                    frontMatter = `---
title: "${data.title}"
summary: "${data.summary}"
featured_image: "${data.featured_image}"
weight: ${data.weight || 1}
date: ${data.date}
---`;
                    break;
            }

            return frontMatter + '\n\n' + content;
        }

        // 生成文件名
        function generateFileName(contentType, data) {
            const timestamp = new Date().toISOString().split('T')[0];
            const slug = data.title ? data.title.toLowerCase()
                .replace(/[^\w\s-]/g, '')
                .replace(/\s+/g, '-')
                .substring(0, 50) : 'untitled';

            switch (contentType) {
                case 'products':
                    return data.model ? `${data.model.toLowerCase()}.md` : `product-${slug}.md`;
                case 'news':
                    return `${timestamp}-${slug}.md`;
                case 'cases':
                    return `case-${slug}.md`;
                case 'suppliers':
                    return `${slug}.md`;
                case 'applications':
                    return `${slug}.md`;
                default:
                    return `${timestamp}-${slug}.md`;
            }
        }

        // 处理内容中的图片，转换为MD语法路径
        async function processImagesInContent(content, contentType, itemId) {
            // 查找所有图片引用
            const imageRegex = /<img[^>]+src="([^"]+)"[^>]*>/g;
            const markdownImageRegex = /!\[([^\]]*)\]\(([^)]+)\)/g;

            let processedContent = content;

            // 处理HTML img标签
            let match;
            while ((match = imageRegex.exec(content)) !== null) {
                const originalSrc = match[1];
                const newPath = await processImageUpload(originalSrc, contentType, itemId);
                if (newPath) {
                    const altText = extractAltFromImg(match[0]) || '图片';
                    const markdownImage = `![${altText}](${newPath})`;
                    processedContent = processedContent.replace(match[0], markdownImage);
                }
            }

            // 处理Markdown图片语法中的路径
            while ((match = markdownImageRegex.exec(content)) !== null) {
                const altText = match[1];
                const originalSrc = match[2];
                const newPath = await processImageUpload(originalSrc, contentType, itemId);
                if (newPath) {
                    const markdownImage = `![${altText}](${newPath})`;
                    processedContent = processedContent.replace(match[0], markdownImage);
                }
            }

            return processedContent;
        }

        // 处理单个图片上传
        async function processImageUpload(imageSrc, contentType, itemId) {
            try {
                // 如果是本地文件或blob URL，需要上传
                if (imageSrc.startsWith('blob:') || imageSrc.startsWith('data:')) {
                    const uploadedPath = await uploadImageToMediaLibrary(imageSrc, contentType, itemId);
                    return uploadedPath;
                }

                // 如果是外部URL，保持原样
                if (imageSrc.startsWith('http://') || imageSrc.startsWith('https://')) {
                    return imageSrc;
                }

                // 如果是相对路径，转换为标准路径
                if (imageSrc.startsWith('/')) {
                    return imageSrc;
                }

                // 其他情况，添加路径前缀
                return `/images/content/${contentType}/${imageSrc}`;

            } catch (error) {
                console.error('处理图片失败:', error);
                return imageSrc; // 失败时返回原路径
            }
        }

        // 上传图片到媒体库
        async function uploadImageToMediaLibrary(imageSrc, contentType, itemId) {
            try {
                // 将blob或data URL转换为文件
                const response = await fetch(imageSrc);
                const blob = await response.blob();

                const formData = new FormData();
                const fileName = `${contentType}-${itemId}-${Date.now()}.${blob.type.split('/')[1]}`;
                formData.append('file', blob, fileName);
                formData.append('category', contentType);

                const uploadResponse = await fetch('/api/media/upload', {
                    method: 'POST',
                    body: formData
                });

                if (uploadResponse.ok) {
                    const result = await uploadResponse.json();
                    return result.path;
                } else {
                    throw new Error('上传失败');
                }

            } catch (error) {
                console.error('上传图片到媒体库失败:', error);
                return imageSrc;
            }
        }

        // 从img标签提取alt属性
        function extractAltFromImg(imgTag) {
            const altMatch = imgTag.match(/alt="([^"]*)"/);
            return altMatch ? altMatch[1] : '';
        }

        // 产品管理功能
        function addProduct() {
            currentEditingProductId = null;
            document.getElementById('productModalTitle').textContent = '添加产品';
            clearProductForm();
            initializeProductForm();

            const modal = new bootstrap.Modal(document.getElementById('productModal'));
            modal.show();
        }

        function editProduct(productId) {
            const product = projectData.products.find(p => p.id === productId);
            if (!product) return;

            currentEditingProductId = productId;
            document.getElementById('productModalTitle').textContent = '编辑产品';

            // 填充表单数据
            document.getElementById('productTitle').value = product.title || '';
            document.getElementById('productModel').value = product.model || '';
            document.getElementById('productSummary').value = product.summary || '';
            document.getElementById('productPrimaryCategory').value = product.primary_category || '';
            document.getElementById('productSecondaryCategory').value = product.secondary_category || '';
            document.getElementById('productSupplier').value = product.supplier || '';
            document.getElementById('productSeries').value = product.series || '';
            document.getElementById('productStatus').value = product.status || 'published';
            document.getElementById('productWeight').value = product.weight || 1;
            document.getElementById('productDate').value = product.date || new Date().toISOString().split('T')[0];

            initializeProductForm();

            const modal = new bootstrap.Modal(document.getElementById('productModal'));
            modal.show();
        }

        function deleteProduct(productId) {
            if (confirm('确定要删除这个产品吗？此操作不可撤销。')) {
                const index = projectData.products.findIndex(p => p.id === productId);
                if (index !== -1) {
                    projectData.products.splice(index, 1);
                    updateProductList();
                    updateDashboard();
                    showSyncStatus('产品删除成功', 2000);
                }
            }
        }

        async function saveProduct() {
            const title = document.getElementById('productTitle').value.trim();
            const model = document.getElementById('productModel').value.trim();

            if (!title || !model) {
                alert('请填写产品标题和型号');
                return;
            }

            const productData = {
                title: title,
                model: model,
                summary: document.getElementById('productSummary').value.trim(),
                primary_category: document.getElementById('productPrimaryCategory').value,
                secondary_category: document.getElementById('productSecondaryCategory').value,
                supplier: document.getElementById('productSupplier').value,
                series: document.getElementById('productSeries').value,
                status: document.getElementById('productStatus').value,
                weight: parseInt(document.getElementById('productWeight').value) || 1,
                date: document.getElementById('productDate').value,
                parameters: collectParameters(),
                gallery: collectGalleryImages(),
                data_download: collectDownloadFiles(),
                related_products: collectRelatedProducts(),
                content: getProductContent()
            };

            // 保存到MD文件
            const saveSuccess = await saveContentToMarkdown('products', productData);

            if (saveSuccess) {
                if (currentEditingProductId) {
                    // 更新现有产品
                    const index = projectData.products.findIndex(p => p.id === currentEditingProductId);
                    if (index !== -1) {
                        projectData.products[index] = { ...projectData.products[index], ...productData };
                        showSyncStatus('产品更新并同步到MD文件成功', 2000);
                    }
                } else {
                    // 添加新产品
                    const newId = model.toLowerCase().replace(/[^a-z0-9]/g, '-');
                    projectData.products.push({
                        id: newId,
                        uri: `/products/${newId}/`,
                        ...productData
                    });
                    showSyncStatus('产品添加并保存到MD文件成功', 2000);
                }

                updateProductList();
                updateDashboard();
                bootstrap.Modal.getInstance(document.getElementById('productModal')).hide();

                // 重新加载项目数据以确保同步
                setTimeout(() => {
                    loadProjectData();
                }, 1000);
            }
        }

        // 收集图库图片
        function collectGalleryImages() {
            const gallery = [];
            const galleryItems = document.querySelectorAll('.gallery-item');

            galleryItems.forEach((item, index) => {
                const img = item.querySelector('img');
                const altInput = item.querySelector('.image-alt');
                const isMainCheckbox = item.querySelector('.is-main-image');

                if (img && img.src) {
                    gallery.push({
                        image: img.src,
                        alt: altInput ? altInput.value : `产品图片 ${index + 1}`,
                        is_main: isMainCheckbox ? isMainCheckbox.checked : index === 0
                    });
                }
            });

            return gallery;
        }

        // 收集下载文件
        function collectDownloadFiles() {
            const files = [];
            const fileItems = document.querySelectorAll('.download-file-item');

            fileItems.forEach(item => {
                const titleInput = item.querySelector('.file-title');
                const pathInput = item.querySelector('.file-path');

                if (titleInput && pathInput && titleInput.value && pathInput.value) {
                    files.push({
                        file_title: titleInput.value,
                        file_path: pathInput.value
                    });
                }
            });

            return files;
        }

        // 收集相关产品
        function collectRelatedProducts() {
            const relatedProducts = [];
            const relatedItems = document.querySelectorAll('.related-product-item');

            relatedItems.forEach(item => {
                const productId = item.dataset.productId;
                if (productId) {
                    relatedProducts.push(productId);
                }
            });

            return relatedProducts;
        }

        // 获取产品内容（富文本编辑器内容）
        function getProductContent() {
            // 如果使用了富文本编辑器，从编辑器获取内容
            if (window.productContentEditor) {
                return window.productContentEditor.getHTML();
            }

            // 否则从textarea获取
            const contentTextarea = document.getElementById('productContent');
            return contentTextarea ? contentTextarea.value : '';
        }

        function clearProductForm() {
            document.getElementById('productForm').reset();
            document.getElementById('parametersContainer').innerHTML = '';
            document.getElementById('productDate').value = new Date().toISOString().split('T')[0];
        }

        function initializeProductForm() {
            // 初始化分类选项
            const primaryCategorySelect = document.getElementById('productPrimaryCategory');
            primaryCategorySelect.innerHTML = '<option value="">选择主要分类</option>';
            Object.keys(categoryHierarchy).forEach(category => {
                const option = document.createElement('option');
                option.value = category;
                option.textContent = category;
                primaryCategorySelect.appendChild(option);
            });

            // 初始化供应商选项
            const supplierSelect = document.getElementById('productSupplier');
            supplierSelect.innerHTML = '<option value="">选择供应商</option>';
            Object.keys(supplierSeriesMap).forEach(supplier => {
                const option = document.createElement('option');
                option.value = supplier;
                option.textContent = supplier;
                supplierSelect.appendChild(option);
            });

            // 触发级联更新
            updateSecondaryCategories();
            updateProductSeries();
        }

        function updateSecondaryCategories() {
            const primaryCategory = document.getElementById('productPrimaryCategory').value;
            const secondarySelect = document.getElementById('productSecondaryCategory');

            secondarySelect.innerHTML = '<option value="">选择次要分类</option>';

            if (primaryCategory && categoryHierarchy[primaryCategory]) {
                categoryHierarchy[primaryCategory].forEach(subCategory => {
                    const option = document.createElement('option');
                    option.value = subCategory;
                    option.textContent = subCategory;
                    secondarySelect.appendChild(option);
                });
            }
        }

        function updateProductSeries() {
            const supplier = document.getElementById('productSupplier').value;
            const seriesSelect = document.getElementById('productSeries');

            seriesSelect.innerHTML = '<option value="">选择产品系列</option>';

            if (supplier && supplierSeriesMap[supplier]) {
                supplierSeriesMap[supplier].forEach(series => {
                    const option = document.createElement('option');
                    option.value = series;
                    option.textContent = series;
                    seriesSelect.appendChild(option);
                });
            }
        }

        // 参数管理功能
        function loadParameterTemplate() {
            const category = document.getElementById('productPrimaryCategory').value;
            const container = document.getElementById('parametersContainer');

            if (!category || !defaultParameterTemplates[category]) {
                alert('请先选择产品分类');
                return;
            }

            container.innerHTML = '';
            defaultParameterTemplates[category].forEach(param => {
                addParameter(param.name, param.value);
            });
        }

        function addParameter(name = '', value = '') {
            const container = document.getElementById('parametersContainer');
            const parameterId = 'param-' + Date.now();

            const parameterDiv = document.createElement('div');
            parameterDiv.className = 'row mb-2 parameter-row';
            parameterDiv.id = `parameter-${parameterId}`;

            parameterDiv.innerHTML = `
                <div class="col-md-5">
                    <input type="text" class="form-control" placeholder="参数名称" value="${name}" name="paramName">
                </div>
                <div class="col-md-6">
                    <input type="text" class="form-control" placeholder="参数值" value="${value}" name="paramValue">
                </div>
                <div class="col-md-1">
                    <button type="button" class="btn btn-outline-danger btn-sm" onclick="removeParameter('${parameterId}')">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            `;

            container.appendChild(parameterDiv);
        }

        function removeParameter(id) {
            const parameterDiv = document.getElementById(`parameter-${id}`);
            if (parameterDiv) {
                parameterDiv.remove();
            }
        }

        function collectParameters() {
            const parameters = [];
            const parameterRows = document.querySelectorAll('.parameter-row');

            parameterRows.forEach(row => {
                const name = row.querySelector('input[name="paramName"]').value.trim();
                const value = row.querySelector('input[name="paramValue"]').value.trim();

                if (name && value) {
                    parameters.push({ name, value });
                }
            });

            return parameters;
        }

        // 产品列表更新
        function updateProductList() {
            console.log('🔄 更新产品列表...');
            if (!projectData.products || projectData.products.length === 0) {
                console.log('⚠️ 产品数据为空');
                filteredProducts = [];
            } else {
                filteredProducts = [...projectData.products];
                console.log(`✅ 产品数据已复制: ${filteredProducts.length} 个产品`);
            }

            // 初始化筛选器
            initializeProductFilters();

            // 渲染列表
            renderProductList();
        }

        function renderProductList() {
            const tbody = document.getElementById('productList');
            if (!tbody) {
                console.error('❌ 未找到productList元素');
                return;
            }

            console.log(`🔄 渲染产品列表: 总产品${projectData.products.length}个, 过滤后${filteredProducts.length}个`);

            const startIndex = (currentProductPage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const pageProducts = filteredProducts.slice(startIndex, endIndex);

            if (pageProducts.length === 0) {
                console.log('⚠️ 没有产品数据显示');
                tbody.innerHTML = `
                    <tr>
                        <td colspan="8" class="text-center text-muted py-4">
                            <i class="fas fa-box-open fa-2x mb-2"></i>
                            <div>暂无产品数据</div>
                            <small class="text-muted">总产品: ${projectData.products.length}, 过滤后: ${filteredProducts.length}</small>
                        </td>
                    </tr>
                `;
                updateProductPagination();
                return;
            }

            console.log(`✅ 显示产品: ${pageProducts.length} 个`);
            pageProducts.forEach(product => {
                console.log(`  - ${product.title} (${product.model})`);
            });

            tbody.innerHTML = pageProducts.map(product => `
                <tr>
                    <td>
                        <strong>${product.title}</strong>
                        ${product.summary ? `<br><small class="text-muted">${product.summary.substring(0, 50)}${product.summary.length > 50 ? '...' : ''}</small>` : ''}
                    </td>
                    <td><code>${product.model}</code></td>
                    <td>
                        <span class="badge bg-primary">${product.primary_category}</span>
                        ${product.secondary_category ? `<br><small class="text-muted">${product.secondary_category}</small>` : ''}
                    </td>
                    <td>${product.supplier}</td>
                    <td>${product.series || '-'}</td>
                    <td>
                        <span class="badge ${product.status === 'published' ? 'bg-success' : 'bg-warning'}">
                            ${product.status === 'published' ? '已发布' : '草稿'}
                        </span>
                    </td>
                    <td>${product.date}</td>
                    <td>
                        <div class="btn-group btn-group-sm">
                            <button class="btn btn-outline-primary" onclick="editProduct('${product.id}')" title="编辑">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn btn-outline-danger" onclick="deleteProduct('${product.id}')" title="删除">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </td>
                </tr>
            `).join('');

            updateProductPagination();
        }

        function updateProductPagination() {
            const totalPages = Math.ceil(filteredProducts.length / itemsPerPage);
            const paginationInfo = document.getElementById('productPaginationInfo');
            const pagination = document.getElementById('productPagination');

            // 更新信息
            const startIndex = (currentProductPage - 1) * itemsPerPage + 1;
            const endIndex = Math.min(currentProductPage * itemsPerPage, filteredProducts.length);
            paginationInfo.textContent = `显示 ${startIndex}-${endIndex} 共 ${filteredProducts.length} 个产品`;

            // 生成分页按钮
            if (totalPages <= 1) {
                pagination.innerHTML = '';
                return;
            }

            pagination.innerHTML = generatePaginationHTML(currentProductPage, totalPages, 'changeProductPage');
        }

        function changeProductPage(page) {
            const totalPages = Math.ceil(filteredProducts.length / itemsPerPage);
            if (page >= 1 && page <= totalPages) {
                currentProductPage = page;
                renderProductList();
            }
        }

        // 通用分页HTML生成函数
        function generatePaginationHTML(currentPage, totalPages, changeFunction) {
            let paginationHTML = '';

            // 上一页
            paginationHTML += `
                <li class="page-item ${currentPage === 1 ? 'disabled' : ''}">
                    <a class="page-link" href="#" onclick="${changeFunction}(${currentPage - 1})">上一页</a>
                </li>
            `;

            // 页码
            for (let i = 1; i <= totalPages; i++) {
                if (i === 1 || i === totalPages || (i >= currentPage - 2 && i <= currentPage + 2)) {
                    paginationHTML += `
                        <li class="page-item ${i === currentPage ? 'active' : ''}">
                            <a class="page-link" href="#" onclick="${changeFunction}(${i})">${i}</a>
                        </li>
                    `;
                } else if (i === currentPage - 3 || i === currentPage + 3) {
                    paginationHTML += '<li class="page-item disabled"><span class="page-link">...</span></li>';
                }
            }

            // 下一页
            paginationHTML += `
                <li class="page-item ${currentPage === totalPages ? 'disabled' : ''}">
                    <a class="page-link" href="#" onclick="${changeFunction}(${currentPage + 1})">下一页</a>
                </li>
            `;

            return paginationHTML;
        }

        // 筛选功能
        function initializeProductFilters() {
            // 初始化供应商筛选
            const supplierFilter = document.getElementById('supplierFilter');
            supplierFilter.innerHTML = '<option value="">所有供应商</option>';
            const suppliers = [...new Set(projectData.products.map(p => p.supplier).filter(s => s))];
            suppliers.forEach(supplier => {
                const option = document.createElement('option');
                option.value = supplier;
                option.textContent = supplier;
                supplierFilter.appendChild(option);
            });

            // 初始化分类筛选
            const categoryFilter = document.getElementById('categoryFilter');
            categoryFilter.innerHTML = '<option value="">所有分类</option>';
            const categories = [...new Set(projectData.products.map(p => p.primary_category).filter(c => c))];
            categories.forEach(category => {
                const option = document.createElement('option');
                option.value = category;
                option.textContent = category;
                categoryFilter.appendChild(option);
            });
        }

        function filterProducts() {
            const searchTerm = document.getElementById('productSearch').value.toLowerCase();
            const supplierFilter = document.getElementById('supplierFilter').value;
            const categoryFilter = document.getElementById('categoryFilter').value;
            const statusFilter = document.getElementById('statusFilter').value;

            filteredProducts = projectData.products.filter(product => {
                const matchesSearch = !searchTerm ||
                    product.title.toLowerCase().includes(searchTerm) ||
                    product.model.toLowerCase().includes(searchTerm) ||
                    (product.summary && product.summary.toLowerCase().includes(searchTerm));

                const matchesSupplier = !supplierFilter || product.supplier === supplierFilter;
                const matchesCategory = !categoryFilter || product.primary_category === categoryFilter;
                const matchesStatus = !statusFilter || product.status === statusFilter;

                return matchesSearch && matchesSupplier && matchesCategory && matchesStatus;
            });

            currentProductPage = 1;
            renderProductList();
        }

        function clearProductFilters() {
            document.getElementById('productSearch').value = '';
            document.getElementById('supplierFilter').value = '';
            document.getElementById('categoryFilter').value = '';
            document.getElementById('statusFilter').value = '';
            filterProducts();
        }

        // 更新当前显示的列表
        function updateCurrentSectionList() {
            const currentSection = document.querySelector('.content-section.active');
            if (!currentSection) {
                console.log('⚠️ 未找到当前活动的section');
                return;
            }

            const sectionId = currentSection.id;
            console.log(`🔄 更新 ${sectionId} 列表`);

            switch (sectionId) {
                case 'products':
                    updateProductList();
                    initializeProductFilters();
                    break;
                case 'suppliers':
                    updateSupplierList();
                    initializeSupplierFilters();
                    break;
                case 'news':
                    updateNewsList();
                    initializeNewsFilters();
                    break;
                case 'cases':
                    updateCaseList();
                    initializeCaseFilters();
                    break;
                case 'applications':
                    updateApplicationList();
                    break;
                case 'categories':
                    updateCategoryList();
                    break;
                default:
                    console.log(`ℹ️ ${sectionId} 不需要列表更新`);
            }
        }

        // 供应商列表管理
        function updateSupplierList() {
            filteredSuppliers = [...projectData.suppliers];
            applySupplierFilters();
            renderSupplierList();
        }

        function renderSupplierList() {
            const tbody = document.getElementById('supplierList');
            if (!tbody) {
                console.error('❌ 未找到supplierList元素');
                return;
            }

            console.log(`🔄 渲染供应商列表: ${filteredSuppliers.length} 个供应商`);

            const startIndex = (currentSupplierPage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const pageSuppliers = filteredSuppliers.slice(startIndex, endIndex);

            if (pageSuppliers.length === 0) {
                console.log('⚠️ 没有供应商数据显示');
                tbody.innerHTML = `
                    <tr>
                        <td colspan="7" class="text-center text-muted py-4">
                            <i class="fas fa-building fa-2x mb-2"></i>
                            <div>暂无供应商数据</div>
                        </td>
                    </tr>
                `;
                updateSupplierPagination();
                return;
            }

            console.log(`✅ 显示供应商: ${pageSuppliers.length} 个`);
            pageSuppliers.forEach(supplier => {
                console.log(`  - ${supplier.name} (${supplier.products}个产品)`);
            });

            tbody.innerHTML = pageSuppliers.map(supplier => `
                <tr>
                    <td>
                        <strong>${supplier.name}</strong>
                        ${supplier.address ? `<br><small class="text-muted">${supplier.address}</small>` : ''}
                    </td>
                    <td><span class="badge bg-info">${supplier.type}</span></td>
                    <td><span class="badge bg-primary">${supplier.products || 0}</span></td>
                    <td>${supplier.contact_person || '-'}</td>
                    <td>${supplier.phone || supplier.email || '-'}</td>
                    <td>
                        <span class="badge ${supplier.status === 'active' ? 'bg-success' : 'bg-secondary'}">
                            ${supplier.status === 'active' ? '活跃' : '停用'}
                        </span>
                    </td>
                    <td>
                        <div class="btn-group btn-group-sm">
                            <button class="btn btn-outline-primary" onclick="editSupplier('${supplier.id}')" title="编辑">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn btn-outline-danger" onclick="deleteSupplier('${supplier.id}')" title="删除">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </td>
                </tr>
            `).join('');

            updateSupplierPagination();
        }

        function updateSupplierPagination() {
            const totalPages = Math.ceil(filteredSuppliers.length / itemsPerPage);
            const paginationInfo = document.getElementById('supplierPaginationInfo');
            const pagination = document.getElementById('supplierPagination');

            if (!paginationInfo || !pagination) return;

            const startIndex = (currentSupplierPage - 1) * itemsPerPage + 1;
            const endIndex = Math.min(currentSupplierPage * itemsPerPage, filteredSuppliers.length);
            paginationInfo.textContent = `显示 ${startIndex}-${endIndex} 共 ${filteredSuppliers.length} 个供应商`;

            if (totalPages <= 1) {
                pagination.innerHTML = '';
                return;
            }

            pagination.innerHTML = generatePaginationHTML(currentSupplierPage, totalPages, 'changeSupplierPage');
        }

        function changeSupplierPage(page) {
            const totalPages = Math.ceil(filteredSuppliers.length / itemsPerPage);
            if (page >= 1 && page <= totalPages) {
                currentSupplierPage = page;
                renderSupplierList();
            }
        }

        function applySupplierFilters() {
            // 供应商筛选逻辑将在后续实现
            filteredSuppliers = [...projectData.suppliers];
            currentSupplierPage = 1;
        }

        // 资讯列表管理
        function updateNewsList() {
            filteredNews = [...projectData.news];
            applyNewsFilters();
            renderNewsList();
        }

        function renderNewsList() {
            const tbody = document.getElementById('newsList');
            if (!tbody) {
                console.error('❌ 未找到newsList元素');
                return;
            }

            console.log(`🔄 渲染资讯列表: ${filteredNews.length} 个资讯`);

            const startIndex = (currentNewsPage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const pageNews = filteredNews.slice(startIndex, endIndex);

            if (pageNews.length === 0) {
                console.log('⚠️ 没有资讯数据显示');
                tbody.innerHTML = `
                    <tr>
                        <td colspan="6" class="text-center text-muted py-4">
                            <i class="fas fa-newspaper fa-2x mb-2"></i>
                            <div>暂无资讯数据</div>
                        </td>
                    </tr>
                `;
                updateNewsPagination();
                return;
            }

            console.log(`✅ 显示资讯: ${pageNews.length} 个`);

            tbody.innerHTML = pageNews.map(news => `
                <tr>
                    <td>
                        <strong>${news.title}</strong>
                        ${news.summary ? `<br><small class="text-muted">${news.summary.substring(0, 50)}${news.summary.length > 50 ? '...' : ''}</small>` : ''}
                    </td>
                    <td>
                        ${news.categories ? news.categories.map(cat => `<span class="badge bg-secondary me-1">${cat}</span>`).join('') : '-'}
                    </td>
                    <td>${news.author || '-'}</td>
                    <td><span class="badge bg-info">${news.views || 0}</span></td>
                    <td>${news.date}</td>
                    <td>
                        <div class="btn-group btn-group-sm">
                            <button class="btn btn-outline-primary" onclick="editNews('${news.id}')" title="编辑">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn btn-outline-danger" onclick="deleteNews('${news.id}')" title="删除">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </td>
                </tr>
            `).join('');

            updateNewsPagination();
        }

        function updateNewsPagination() {
            const totalPages = Math.ceil(filteredNews.length / itemsPerPage);
            const paginationInfo = document.getElementById('newsPaginationInfo');
            const pagination = document.getElementById('newsPagination');

            if (!paginationInfo || !pagination) return;

            const startIndex = (currentNewsPage - 1) * itemsPerPage + 1;
            const endIndex = Math.min(currentNewsPage * itemsPerPage, filteredNews.length);
            paginationInfo.textContent = `显示 ${startIndex}-${endIndex} 共 ${filteredNews.length} 个资讯`;

            if (totalPages <= 1) {
                pagination.innerHTML = '';
                return;
            }

            pagination.innerHTML = generatePaginationHTML(currentNewsPage, totalPages, 'changeNewsPage');
        }

        function changeNewsPage(page) {
            const totalPages = Math.ceil(filteredNews.length / itemsPerPage);
            if (page >= 1 && page <= totalPages) {
                currentNewsPage = page;
                renderNewsList();
            }
        }

        function applyNewsFilters() {
            // 资讯筛选逻辑将在后续实现
            filteredNews = [...projectData.news];
            currentNewsPage = 1;
        }

        // 案例列表管理
        function updateCaseList() {
            filteredCases = [...projectData.cases];
            applyCaseFilters();
            renderCaseList();
        }

        function renderCaseList() {
            const tbody = document.getElementById('caseList');
            if (!tbody) return;

            const startIndex = (currentCasePage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const pageCases = filteredCases.slice(startIndex, endIndex);

            if (pageCases.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="6" class="text-center text-muted py-4">
                            <i class="fas fa-briefcase fa-2x mb-2"></i>
                            <div>暂无案例数据</div>
                        </td>
                    </tr>
                `;
                updateCasePagination();
                return;
            }

            tbody.innerHTML = pageCases.map(caseItem => `
                <tr>
                    <td>
                        <strong>${caseItem.title}</strong>
                        ${caseItem.summary ? `<br><small class="text-muted">${caseItem.summary.substring(0, 50)}${caseItem.summary.length > 50 ? '...' : ''}</small>` : ''}
                    </td>
                    <td>${caseItem.client || '-'}</td>
                    <td><span class="badge bg-primary">${caseItem.industry || '-'}</span></td>
                    <td>
                        ${caseItem.application_field ? caseItem.application_field.map(field => `<span class="badge bg-secondary me-1">${field}</span>`).join('') : '-'}
                    </td>
                    <td>${caseItem.date}</td>
                    <td>
                        <div class="btn-group btn-group-sm">
                            <button class="btn btn-outline-primary" onclick="editCase('${caseItem.id}')" title="编辑">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn btn-outline-danger" onclick="deleteCase('${caseItem.id}')" title="删除">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </td>
                </tr>
            `).join('');

            updateCasePagination();
        }

        function updateCasePagination() {
            const totalPages = Math.ceil(filteredCases.length / itemsPerPage);
            const paginationInfo = document.getElementById('casePaginationInfo');
            const pagination = document.getElementById('casePagination');

            if (!paginationInfo || !pagination) return;

            const startIndex = (currentCasePage - 1) * itemsPerPage + 1;
            const endIndex = Math.min(currentCasePage * itemsPerPage, filteredCases.length);
            paginationInfo.textContent = `显示 ${startIndex}-${endIndex} 共 ${filteredCases.length} 个案例`;

            if (totalPages <= 1) {
                pagination.innerHTML = '';
                return;
            }

            pagination.innerHTML = generatePaginationHTML(currentCasePage, totalPages, 'changeCasePage');
        }

        function changeCasePage(page) {
            const totalPages = Math.ceil(filteredCases.length / itemsPerPage);
            if (page >= 1 && page <= totalPages) {
                currentCasePage = page;
                renderCaseList();
            }
        }

        function applyCaseFilters() {
            // 案例筛选逻辑将在后续实现
            filteredCases = [...projectData.cases];
            currentCasePage = 1;
        }

        // 应用领域列表管理
        function updateApplicationList() {
            filteredApplications = [...projectData.applications];
            applyApplicationFilters();
            renderApplicationList();
        }

        function renderApplicationList() {
            const tbody = document.getElementById('applicationList');
            if (!tbody) return;

            const startIndex = (currentApplicationPage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const pageApplications = filteredApplications.slice(startIndex, endIndex);

            if (pageApplications.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="5" class="text-center text-muted py-4">
                            <i class="fas fa-cogs fa-2x mb-2"></i>
                            <div>暂无应用领域数据</div>
                        </td>
                    </tr>
                `;
                updateApplicationPagination();
                return;
            }

            tbody.innerHTML = pageApplications.map(app => `
                <tr>
                    <td>
                        <strong>${app.title}</strong>
                        ${app.summary ? `<br><small class="text-muted">${app.summary.substring(0, 50)}${app.summary.length > 50 ? '...' : ''}</small>` : ''}
                    </td>
                    <td><span class="badge bg-info">${app.weight || 1}</span></td>
                    <td>
                        <span class="badge ${app.status === 'published' ? 'bg-success' : 'bg-warning'}">
                            ${app.status === 'published' ? '已发布' : '草稿'}
                        </span>
                    </td>
                    <td>${app.date}</td>
                    <td>
                        <div class="btn-group btn-group-sm">
                            <button class="btn btn-outline-primary" onclick="editApplication('${app.id}')" title="编辑">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn btn-outline-danger" onclick="deleteApplication('${app.id}')" title="删除">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </td>
                </tr>
            `).join('');

            updateApplicationPagination();
        }

        function updateApplicationPagination() {
            const totalPages = Math.ceil(filteredApplications.length / itemsPerPage);
            const paginationInfo = document.getElementById('applicationPaginationInfo');
            const pagination = document.getElementById('applicationPagination');

            if (!paginationInfo || !pagination) return;

            const startIndex = (currentApplicationPage - 1) * itemsPerPage + 1;
            const endIndex = Math.min(currentApplicationPage * itemsPerPage, filteredApplications.length);
            paginationInfo.textContent = `显示 ${startIndex}-${endIndex} 共 ${filteredApplications.length} 个应用领域`;

            if (totalPages <= 1) {
                pagination.innerHTML = '';
                return;
            }

            pagination.innerHTML = generatePaginationHTML(currentApplicationPage, totalPages, 'changeApplicationPage');
        }

        function changeApplicationPage(page) {
            const totalPages = Math.ceil(filteredApplications.length / itemsPerPage);
            if (page >= 1 && page <= totalPages) {
                currentApplicationPage = page;
                renderApplicationList();
            }
        }

        function applyApplicationFilters() {
            // 应用领域筛选逻辑将在后续实现
            filteredApplications = [...projectData.applications];
            currentApplicationPage = 1;
        }

        // 分类列表管理
        function updateCategoryList() {
            filteredCategories = [...projectData.categories];
            applyCategoryFilters();
            renderCategoryList();
        }

        function renderCategoryList() {
            const tbody = document.getElementById('categoryList');
            if (!tbody) return;

            const startIndex = (currentCategoryPage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const pageCategories = filteredCategories.slice(startIndex, endIndex);

            if (pageCategories.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="5" class="text-center text-muted py-4">
                            <i class="fas fa-tags fa-2x mb-2"></i>
                            <div>暂无分类数据</div>
                        </td>
                    </tr>
                `;
                updateCategoryPagination();
                return;
            }

            tbody.innerHTML = pageCategories.map(category => `
                <tr>
                    <td>
                        <strong>${category.name}</strong>
                        ${category.description ? `<br><small class="text-muted">${category.description}</small>` : ''}
                    </td>
                    <td><span class="badge bg-info">${category.level}</span></td>
                    <td><span class="badge bg-primary">${category.product_count || 0}</span></td>
                    <td>
                        <span class="badge ${category.status === 'active' ? 'bg-success' : 'bg-secondary'}">
                            ${category.status === 'active' ? '启用' : '禁用'}
                        </span>
                    </td>
                    <td>
                        <div class="btn-group btn-group-sm">
                            <button class="btn btn-outline-primary" onclick="editCategory('${category.id}')" title="编辑">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn btn-outline-danger" onclick="deleteCategory('${category.id}')" title="删除">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </td>
                </tr>
            `).join('');

            updateCategoryPagination();
        }

        function updateCategoryPagination() {
            const totalPages = Math.ceil(filteredCategories.length / itemsPerPage);
            const paginationInfo = document.getElementById('categoryPaginationInfo');
            const pagination = document.getElementById('categoryPagination');

            if (!paginationInfo || !pagination) return;

            const startIndex = (currentCategoryPage - 1) * itemsPerPage + 1;
            const endIndex = Math.min(currentCategoryPage * itemsPerPage, filteredCategories.length);
            paginationInfo.textContent = `显示 ${startIndex}-${endIndex} 共 ${filteredCategories.length} 个分类`;

            if (totalPages <= 1) {
                pagination.innerHTML = '';
                return;
            }

            pagination.innerHTML = generatePaginationHTML(currentCategoryPage, totalPages, 'changeCategoryPage');
        }

        function changeCategoryPage(page) {
            const totalPages = Math.ceil(filteredCategories.length / itemsPerPage);
            if (page >= 1 && page <= totalPages) {
                currentCategoryPage = page;
                renderCategoryList();
            }
        }

        function applyCategoryFilters() {
            // 分类筛选逻辑将在后续实现
            filteredCategories = [...projectData.categories];
            currentCategoryPage = 1;
        }

        // 仪表板更新
        function updateDashboard() {
            document.getElementById('productCount').textContent = projectData.products.length;
            document.getElementById('supplierCount').textContent = projectData.suppliers.length;
            document.getElementById('newsCount').textContent = projectData.news.length;
            document.getElementById('caseCount').textContent = projectData.cases.length;
        }

        // 默认数据加载（备用）
        function loadDefaultData() {
            projectData.products = [
                {
                    id: 'ws-k08510-a',
                    title: 'WS-K08510超细工业电子内窥镜',
                    model: 'WS-K08510',
                    summary: '0.85mm超小直径，高清成像，适用于极小空间检测',
                    primary_category: '电子内窥镜',
                    secondary_category: '工业视频内窥镜',
                    supplier: '深圳市微视光电科技有限公司',
                    series: 'K系列',
                    status: 'published',
                    date: '2025-01-01'
                }
            ];

            projectData.suppliers = [
                {
                    id: 'supplier-1',
                    name: '深圳市微视光电科技有限公司',
                    type: '制造商',
                    products: 1,
                    status: 'active',
                    date: '2025-01-01'
                }
            ];

            updateDashboard();
            updateProductList();
            initializeProductFilters();
        }

        // 筛选功能占位符
        function filterSuppliers() {
            applySupplierFilters();
            renderSupplierList();
        }
        function clearSupplierFilters() {
            filteredSuppliers = [...projectData.suppliers];
            currentSupplierPage = 1;
            renderSupplierList();
        }
        function initializeSupplierFilters() {
            console.log('初始化供应商筛选选项');
        }
        function addSupplier() { alert('供应商添加功能开发中...'); }
        function editSupplier(id) { alert('供应商编辑功能开发中...'); }
        function deleteSupplier(id) { alert('供应商删除功能开发中...'); }

        function filterNews() {
            applyNewsFilters();
            renderNewsList();
        }
        function clearNewsFilters() {
            filteredNews = [...projectData.news];
            currentNewsPage = 1;
            renderNewsList();
        }
        function initializeNewsFilters() {
            console.log('初始化资讯筛选选项');
        }
        function addNews() { alert('资讯添加功能开发中...'); }
        function editNews(id) { alert('资讯编辑功能开发中...'); }
        function deleteNews(id) { alert('资讯删除功能开发中...'); }

        function filterCases() {
            applyCaseFilters();
            renderCaseList();
        }
        function clearCaseFilters() {
            filteredCases = [...projectData.cases];
            currentCasePage = 1;
            renderCaseList();
        }
        function initializeCaseFilters() {
            console.log('初始化案例筛选选项');
        }
        function addCase() { alert('案例添加功能开发中...'); }
        function editCase(id) { alert('案例编辑功能开发中...'); }
        function deleteCase(id) { alert('案例删除功能开发中...'); }

        function filterApplications() {
            applyApplicationFilters();
            renderApplicationList();
        }
        function clearApplicationFilters() {
            filteredApplications = [...projectData.applications];
            currentApplicationPage = 1;
            renderApplicationList();
        }
        function addApplication() { alert('应用领域添加功能开发中...'); }
        function editApplication(id) { alert('应用领域编辑功能开发中...'); }
        function deleteApplication(id) { alert('应用领域删除功能开发中...'); }

        function filterCategories() {
            applyCategoryFilters();
            renderCategoryList();
        }
        function clearCategoryFilters() {
            filteredCategories = [...projectData.categories];
            currentCategoryPage = 1;
            renderCategoryList();
        }
        function addCategory() { alert('分类添加功能开发中...'); }
        function editCategory(id) { alert('分类编辑功能开发中...'); }
        function deleteCategory(id) { alert('分类删除功能开发中...'); }

        // 强制更新所有列表（调试用）
        function forceUpdateAllLists() {
            console.log('🔄 强制更新所有列表...');

            // 确保数据存在
            if (!projectData.products) projectData.products = [];
            if (!projectData.suppliers) projectData.suppliers = [];
            if (!projectData.news) projectData.news = [];
            if (!projectData.cases) projectData.cases = [];
            if (!projectData.applications) projectData.applications = [];
            if (!projectData.categories) projectData.categories = [];

            // 强制更新所有列表
            try {
                updateProductList();
                console.log('✅ 产品列表更新完成');
            } catch (e) { console.error('❌ 产品列表更新失败:', e); }

            try {
                updateSupplierList();
                console.log('✅ 供应商列表更新完成');
            } catch (e) { console.error('❌ 供应商列表更新失败:', e); }

            try {
                updateNewsList();
                console.log('✅ 资讯列表更新完成');
            } catch (e) { console.error('❌ 资讯列表更新失败:', e); }

            try {
                updateCaseList();
                console.log('✅ 案例列表更新完成');
            } catch (e) { console.error('❌ 案例列表更新失败:', e); }

            try {
                updateApplicationList();
                console.log('✅ 应用领域列表更新完成');
            } catch (e) { console.error('❌ 应用领域列表更新失败:', e); }

            try {
                updateCategoryList();
                console.log('✅ 分类列表更新完成');
            } catch (e) { console.error('❌ 分类列表更新失败:', e); }

            console.log('🎉 所有列表强制更新完成');
        }

        // 调试产品数据
        function debugProductData() {
            console.log('🔍 产品数据调试信息:');
            console.log('projectData.products:', projectData.products);
            console.log('filteredProducts:', filteredProducts);
            console.log('currentProductPage:', currentProductPage);
            console.log('itemsPerPage:', itemsPerPage);

            if (projectData.products && projectData.products.length > 0) {
                console.log('✅ 产品数据存在:', projectData.products.length, '个产品');
                projectData.products.slice(0, 3).forEach((product, index) => {
                    console.log(`  ${index + 1}. ${product.title} (${product.model}) - ${product.supplier}`);
                });
            } else {
                console.log('❌ 产品数据为空或未定义');
            }

            // 检查DOM元素
            const tbody = document.getElementById('productList');
            console.log('productList元素:', tbody);
            if (tbody) {
                console.log('当前内容长度:', tbody.innerHTML.length);
                console.log('当前内容预览:', tbody.innerHTML.substring(0, 200));
            }

            // 强制更新产品列表
            console.log('🔄 强制更新产品列表...');
            updateProductList();
        }

        // 添加到全局作用域以便调试
        window.forceUpdateAllLists = forceUpdateAllLists;
        window.debugProductData = debugProductData;

        // 页面初始化
        document.addEventListener('DOMContentLoaded', function() {
            console.log('VisNDT 内容管理中心初始化完成');
            console.log('功能特色：');
            console.log('- 基于MD文件的内容管理');
            console.log('- 完整的CRUD操作支持');
            console.log('- 实时数据同步机制');
            console.log('- 图片自动处理和路径转换');
            console.log('- 富文本编辑器集成');
            console.log('- 媒体库管理');
            console.log('- 所有数据来自项目实际内容');

            // 加载项目数据
            loadProjectData().then((success) => {
                // 数据加载完成后，立即更新当前显示的列表
                setTimeout(() => {
                    console.log('📊 数据加载完成，开始更新列表...');

                    // 确保产品列表正确初始化
                    if (currentSection === 'products') {
                        console.log('🔄 当前在产品页面，强制更新产品列表...');
                        updateProductList();
                    } else {
                        updateCurrentSectionList();
                    }

                    // 如果当前列表更新失败，强制更新所有列表
                    setTimeout(() => {
                        forceUpdateAllLists();
                    }, 500);
                }, 200);
            }).catch((error) => {
                console.error('❌ 数据加载失败:', error);
                // 即使数据加载失败，也尝试更新列表（使用默认数据）
                setTimeout(() => {
                    forceUpdateAllLists();
                }, 1000);
            });

            // 监听窗口大小变化
            window.addEventListener('resize', function() {
                if (window.innerWidth > 768) {
                    closeSidebar();
                }
            });
        });
    </script>
</body>
</html>
